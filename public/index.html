<!DOCTYPE html>
<html lang="zh-HK">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="Web site created using create-react-app" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/apple-touch-icon.png" />
  <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  <title>中國古曆編製器</title>
</head>

<body>
  <section class='content'>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <h1>中國古曆編製器</h1>
    <h2>Chinese Ancient Calendar Generator</h2>
    <div id="root"></div>
    <hr>
    <article>
      <h2 id="本工具簡介">本工具簡介</h2>
      <ol>
        <li>目前的古代朔閏査詢網站都是根據工具書、文獻材料手動調整的<n>參考中研院 <a
              href="https://sinocal.sinica.edu.tw/lusodoc.html">兩千年中西曆轉換說明書</a>，廖育棟 <a
              href="https://ytliu0.github.io/ChineseCalendar/computation_chinese.html">本網站的農曆編算</a></n>。本工具可提供古代實行未實行的
          60 餘部曆法的朔望氣閏計算，完全遵照各曆算法進行全自動計算，無手動干預。這有如下獨特之處：
          <ol>
            <li>提供每年的積年閏餘、每日的確切時刻，這是工具書做不到的。</li>
            <li>未來有機會我會增加各曆的交食、五星推步，這是工具書做不到的。</li>
          </ol>
        </li>
        <li>計算程序採用 JavaScript 編寫，前端框架採用 React，通過瀏覽器進行計算。計算時長約古六曆每曆 5000 年 17 秒，唐宋曆法每曆 5000 年 30 秒，<n>
            近期將增加多選。為保證不死機，我設定為最多同時計算 5 部曆法 1000 年</n>。</li>
        <li>本工具完全開源，如您需要査詢、核査各曆的詳細參數與算法，請前往 源碼倉庫<n>內測階段暫不開放</n>。如您不嫌麻煩，可以下載源碼，在本地運行程序。如您不想每次都在線查詢，可下載
          離線打包文件，直接通過瀏覽器打開卽可。</li>
        <li>
          如您發現任何問題，可通過評論框或郵件向我反饋。本程序目前未經過文獻檢驗，我也暫時沒有機會把歷代的材料全部梳理一遍。若您在研究過程中發現程序結果與文獻不符，望不吝提供線索。這個工具是根據研究需要而開發的，如果您有任何功能需求，敬請與我聯繫，我會在力所能及的範圍內儘量實現。更多信息見頁腳。
        </li>
        <li>各時期曆法的行用情況見 <a href="https://kqh.me/tutorial/calendar4/">赫赫金鑰｜中國古代曆法史</a>。</li>
        <li>
          關於表格的設計：採用加粗—正常——淺灰三層結構，用戶一眼就看到了定朔、平朔、平氣的干支，第二眼看到的是小分，最後如果要看公曆日期和節氣名字的話，纔會去看最不起眼的灰色。不同分類採用橫線隔開，並且有兩種粗細。同一分類就沒有線，避免視線錯亂。定朔平朔之間、定氣平氣之閒用細線，朔望氣之間用粗線。數字都用的等寬字體。每欄中間不設線，間隔恰到好處，不會太寬，讓視線跳躍得很累，也不會太緊，不易分辨。
        </li>
      </ol>
      <h2 id="凡例">凡例</h2>
      <ol>
        <li>第一行爲整年的情況，例如「積2759228 天紀己卯蔀49 大51小747 冬至12.5 閏餘6842閏11」的意思是：此年上元積年爲 2759228 年，入天紀己卯蔀 49 年，天正月大餘 51、小餘
          747，冬至日數 12.5，閏餘 0.6842，按照閏餘法，11 月爲閏月。大餘加上蔀或紀名干支卽爲天正朔干支，如上例，己卯 16 + 大餘 51 = 67，mod (67, 60) = 7，正月朔爲庚午。四分曆日法爲
          940，小餘 747 轉換爲十進制就是 747 / 940 ≒ 0.7947。冬至 12.5 同樣需要加上蔀干支。閏餘爲十進制，若以章法19爲單位，就是0.6842×19=13。</li>
        <li>劉歆<v>世經</v>論<v>三統</v>上元積年多爲算外，但也有用算上的；<v>殷曆</v>
          <v>周曆</v>等古四分曆，歷代學者論上元積年多用算上，但也有用算外的。統一起見，本表各曆上元積年均爲算外，入蔀<n>統</n>年均爲算上。
        </li>
        <li>由於我暫時想不明白的原因，朔干支轉換成公曆日期的功能<n>該算法移植自廖育棟</n>，一年中可能有一個月有1天誤差<n>如甲子應該是2月2日，顯示的是2月1日</n>，並且有可能一整年會前後錯開一個月<n>
            如正月朔對應的是二月的公曆日期</n>。本工具提供的公曆日期僅供參考，如需使用公曆日期，請使用廖育棟的 <a
            href="https://ytliu0.github.io/ChineseCalendar/Julian_chinese.html">儒略日數和日干支計算器</a> 進行覆核。</li>
        <li>置閏共有三種方法：閏餘法、無中氣法、固定冬至法，閏餘法可分爲年中置閏、年末置閏兩種，無中氣法閏月必在年中<n>當然也可能在最後一個月</n>
          ，固定冬至法閏月必在年末。漢代以後均採用無中氣法。古六曆並不確定採用何種置閏法，本工具能同時顯示三種置閏法的結果<n>絕對獨家技術</n>
          ，以固定冬至法為主。第一行最後標注的是閏餘年中置閏法的閏月，若採用閏餘年末置閏法，最後一個月就是閏月。中氣一行採用無中氣置閏法，有「□□」的年份爲無中氣置閏法的閏年，「□□」表示該月無中氣，爲閏月。需要留意的是，若固定冬至法閏年在閏餘法、無中氣法的上一年，那麼該年的閏餘法、無中氣法閏月數需要加
          1
          ，因為固定冬至法把該年的第一個月往上年奪去了。固定冬至法的閏月必定置於年末；無中氣法的閏月可能比閏餘年中法提前或延後一個月：中氣與朔同在一日，中氣的時刻比朔早，則閏餘未達到閏準，還不能置閏；但是由於中氣與朔已經在一日了，上個月無中氣，需要置閏。
        </li>
        <li>判斷大小月的方法：看天干是否相同。如一、二、三月的朔分別是辛亥、辛巳、庚戌，辛亥、辛巳天干一樣，說明一月有 30 日，爲大月；辛巳、庚戌天干不同，說明二月有 29 日，爲小月。</li>
        <li>
          「平朔」卽未考慮日月速度變化而得出的朔日，「平氣」卽未考慮日速度變化而得出的中氣日，「定朔」卽加上日月速度改正而得出的朔日，「定氣」卽加上日速度改正而得出的中氣日。干支下的數字為小分，均為十進制小數，如「8184」卽0.8184，換算成24小時制爲：0.8184
          × 24 = 19.6416，0.6416 × 60 = 38.496，0.496 × 60 ≒ 30，卽19點38分30秒。小分到取小數點後四位，卽精度爲 8.64
          s。各曆均有不同的辰法，需要您手動進行轉換。未來我可能會加入辰法自動轉換。</li>
        <li>「二次」表示用二次差內插法計算出的小分，「一次」表示用線性內插法計算出的小分，「三次」表示用三次差公式計算出的小分。若某曆有二次差定朔計算，則望干支及小餘爲二次差定望，其餘曆法同理。</li>
        <li>雖然漢末<v>乾象曆</v>便出現了定朔推步，但直到唐初<v>麟德曆</v>纔正式開始用定朔編排曆書，此前都是平朔注曆，定朔僅用於交食推步。雖然隋劉焯<v>皇極曆</v>
          便發明了二次差計算定朔，但編排曆書時僅採用簡單的線性內插進行計算，二次差僅用於交食推步。雖然<v>皇極曆</v>開始便可以計算定氣，但直到淸<v>時憲曆</v>
          纔開始用定氣編排曆書，之前都是平氣注曆。本程序在平朔注曆時代用平朔編排閏月；在定朔推曆時代用二次差編排閏月、進朔，若遇一次差與二次差存在臨界差異，用戶大可進行手動調整，但這種極端情況應該不大可能出現。</li>
        <li>
          <v>麟德</v>開始行進朔法，我目前暫時簡單將 0.75 作為進朔標準，進朔的月在干支後加上「+」來表示，僅將干支加
          1，小分維持不變。如「乙丑+」表示原本的干支是甲子，進朔爲乙丑，而小分與進朔前一致。如果遇到與文獻不一致的情況，用戶可根據小分自行調整進朔與置閏。
        </li>
      </ol>

    </article>
  </section>
  <section class="comment-wrap">
    <div class="comment">
      <div id="hyvor-talk-view"></div>
      <script type="text/javascript">
        var HYVOR_TALK_WEBSITE = 1727;
        var HYVOR_TALK_CONFIG = {
          url: 'https://cal.kqh.me',
          id: 'cal-kqh-me'
        };
      </script>
      <script async type="text/javascript" src="//talk.hyvor.com/web-api/embed"></script>
    </div>
  </section>
  <footer>
    <p><a href='https://kqh.me' target="_blank">柯棋瀚</a>©️ 2021-02-23 > 2021（內測請勿外傳）</p>
    <p>email&iMessage: me [at] kqh [dot] me</p>
    <p class='version'>前端v0.91 程序v0.9</p>
    <p>相關鏈接：<a href='https://ytliu0.github.io/ChineseCalendar/index_chinese.html'
        target='_blank'>廖育棟的網站</a>（年曆、氣朔時刻、中國歷史年表、儒略日干支轉換等）。廖育棟的<a
        href='https://ytliu.epizy.com/Shixian/index_chinese.html?i=1' target='_blank'>時憲曆計算</a>。<a
        href='https://kanasimi.github.io/CeJS/_test%20suite/era.htm' target='_blank'>紀年轉換工具</a>（世界各國曆法）。中研院 <a
        href='https://sinocal.sinica.edu.tw/'>兩千年中西曆轉換</a></p>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108451819-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-108451819-1');
    </script>

  </footer>
</body>

</html>