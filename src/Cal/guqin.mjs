import { big, frc } from './para_constant.mjs'
import { Frac2FalseFrac, BigFrc } from './equa_math.mjs'
class Interval {
    constructor(cate = 0, pitch = 'C', half = 0, comma = 0, freq = '1') {
        this.cate = cate
        this.pitch = pitch
        this.half = half
        this.freq = freq
        this.comma = comma
    }
    static NameMap = {
        C: 1, D: 2, E: 3, F: 4, G: 5, A: 6, B: 7
    }
    static HalfMap = {
        1: '‚ôØ', 2: 'ùÑ™', 0: '', '-1': '‚ô≠', '-2': 'ùÑ´'
    }
    get name() {
        return Interval.NameMap[this.pitch]
    }
    nameString(mode) {
        let str = ''
        if (mode === 1) {
            str = this.pitch
        } else if (mode === 2) {
            str = this.name
        }
        let commaString = '', halfString = ''
        if (this.half > 0) {
            halfString = Interval.HalfMap[this.half]
        } else
            if (this.comma > 0) {
                commaString = 'upline' + this.comma
                return `${halfString}<span class="${commaString}">${str}</span>`
            } else if (this.comma < 0) {
                commaString = 'dnline' + -this.comma
                return `${halfString}<span class="${commaString}">${str}</span>`
            } else return str
    }
    get cent() {
        return Number(frc(this.freq))
    }
}
// 0  1  2
// Èü≥Âêç
// Âî±Âêç
// È†ªÁéáÊØî

const FushionListB = [
    new Interval(0, 'C', 0, 0, '1'),
    new Interval(2, 'C', 0, 1, '243/240'),
    new Interval(2, 'C', 1, -2, '25/24'),
    new Interval(1, 'D', -1, 0, '256/243'),
    new Interval(2, 'C', 1, -1, '135/128'),
    new Interval(2, 'D', -1, 1, '16/15'),
    new Interval(1, 'C', 1, 0, '2187/2048'),
    new Interval(2, 'D', -1, 2, '27/25'),
    new Interval(1, 'E', -2, 0, '65536/59049'),
    new Interval(2, 'D', 0, -1, '10/9'),
    new Interval(0, 'D', 0, 0, '9/8'),
    new Interval(2, 'E', -2, 2, '256/225'),
    new Interval(2, 'D', 1, -2, '75/64'),
    new Interval(1, 'E', -1, 0, '32/27'),
    new Interval(2, 'E', -1, 1, '6/5'),
    new Interval(1, 'D', 1, 0, '19683/16384'),
    new Interval(2, 'E', 0, -2, '100/81'),
    new Interval(1, 'F', -1, 0, '8192/6561'),
    new Interval(2, 'E', 0, -1, '5/4'),
    new Interval(0, 'E', 0, 0, '81/64'),
    new Interval(2, 'F', -1, 2, '32/25'),
    new Interval(2, 'E', 1, -2, '675/512'),
    new Interval(0, 'F', 0, 0, '4/3'),
    new Interval(2, 'F', 0, 1, '27/20'),
    new Interval(1, 'E', 1, 0, '177147/131072'),
    new Interval(2, 'F', 1, -2, '25/18'),
    new Interval(1, 'G', -1, 0, '1024/729'),
    new Interval(2, 'F', 1, -1, '45/32'),
    new Interval(2, 'G', -1, 1, '64/45'),
    new Interval(1, 'F', 1, 0, '729/512'),
    new Interval(2, 'G', -1, 2, '36/25'),
    new Interval(1, 'A', -2, 0, '262144/177147'),
    new Interval(2, 'G', 0, -1, '40/27'),
    new Interval(0, 'G', 0, 0, '3/2'),
    new Interval(2, 'G', 0, 1, '243/160'),
    new Interval(2, 'G', 1, -2, '25/16'),
    new Interval(1, 'A', -1, 0, '128/81'),
    new Interval(2, 'G', 1, -1, '405/256'),
    new Interval(2, 'A', -1, 1, '8/5'),
    new Interval(1, 'G', 1, 0, '6561/4096'),
    new Interval(1, 'B', -2, 0, '32768/19683'),
    new Interval(2, 'A', 0, -2, '400/243'),
    new Interval(2, 'A', 0, -1, '5/3'),
    new Interval(1, 'A', 0, 0, '27/16'),
    new Interval(2, 'A', 1, -2, '225/128'),
    new Interval(1, 'B', -1, 0, '16/9'),
    new Interval(2, 'B', -1, 1, '9/5'),
    new Interval(1, 'A', 1, 0, '59049/32768'),
    new Interval(2, 'B', 0, -2, '50/27'),
    new Interval(1, 'C', -1, 0, '4096/2187'),
    new Interval(2, 'B', 0, -1, '15/8'),
    new Interval(2, 'C', -1, 1, '256/135'),
    new Interval(1, 'B', 0, 0, '243/128'),
    new Interval(2, 'C', -1, 2, '48/25'),
    new Interval(1, 'D', -2, 0, '1048576/531441'),
    new Interval(2, 'C', 0, -1, '480/243'),
    new Interval(0, 'C', 0, 0, '2'),
]
const FushionList5 = ['1', '2187/2048', '9/8', '32/27', '81/64', '4/3', '729/512', '3/2', '128/81', '27/16', '16/9', '243/128', '2']
const FushionList1 = ['1', '135/128', '9/8', '6/5', '5/4', '4/3', '45/32', '3/2', '8/5', '5/3', '9/5', '15/8', '2']
const FushionList2 = ['1', '135/128', '10/9', '6/5', '5/4', '4/3', '45/32', '3/2', '8/5', '5/3', '9/5', '15/8', '2']
const FushionList3 = ['1', '135/128', '9/8', '6/5', '5/4', '4/3', '45/32', '3/2', '8/5', '27/16', '9/5', '15/8', '2']
const FushionList4 = ['1', '135/128', '10/9', '6/5', '5/4', '4/3', '45/32', '40/27', '8/5', '5/3', '9/5', '15/8', '2']
const FushionList6 = ['1', '196/185', '1769/1576', '1785/1501', '635/504', '3544/2655', '3363/2378', '2655/1772', '4813/3032', '3002/1785', '4679/2626', '2943/1559', '2']
const FushionList5S = ['1', '9/8', '81/64', '4/3', '729/512', '3/2', '27/16', '243/128', '2']
const FushionList1S = ['1', '9/8', '5/4', '4/3', '45/32', '3/2', '5/3', '15/8', '2']
const FushionList2S = ['1', '10/9', '5/4', '4/3', '45/32', '3/2', '5/3', '15/8', '2']
const FushionList3S = ['1', '9/8', '5/4', '4/3', '45/32', '3/2', '27/16', '15/8', '2']
const FushionList4S = ['1', '10/9', '5/4', '4/3', '45/32', '40/27', '5/3', '15/8', '2']
const FushionList6S = ['1', '1769/1576', '635/504', '3544/2655', '3363/2378', '2655/1772', '3002/1785', '4679/2626', '2943/1559', '2']

const FushionList = { // ÈÄôÊòØ‰∫îÂ∫¶Âæã„ÄÅÁ¥îÂæãÊ∑∑ÂêàÂú®‰∏ÄËµ∑„ÄÇÈô§‰∫Ü C D F G ÊòØÂÖ±Áî®ÔºåÂÖ∂‰ªñÂä†‰∫Ü‰∏ä‰∏ãÁ∑öÁöÑÈÉΩÊòØÁ¥îÂæã„ÄÇÁ¨¨‰∏ÄÂÄãÊï∏Â≠ó 0 ÂÖ±Áî®Ôºå1 ‰∫îÂ∫¶ÂæãÔºå2 Á¥îÂæã
    0: [0, 'C', '1', '1'],
    21.51: [2, '<span class="upline1">C</span>', '<span class="upline1">1</span>', '81/80'],
    70.67: [2, '‚ôØ<span class="dnline2">C</span>', '‚ôØ<span class="dnline2">1</span>', '25/24'], // Â∞èÂçäÈü≥
    90.22: [1, '‚ô≠D', '‚ô≠2', '256/243'],
    92.18: [2, '‚ôØ<span class="dnline1">C</span>', '‚ôØ<span class="dnline1">1</span>', '135/128'],
    100: [3, '‚ôØC', '‚ôØ1', '196/185'],
    111.73: [2, '‚ô≠<span class="upline1">D</span>', '‚ô≠<span class="upline1">2</span>', '16/15'],
    113.69: [1, '‚ôØC', '‚ôØ1', '2187/2048'],
    133.24: [2, '‚ô≠<span class="upline2">D</span>', '‚ô≠<span class="upline2">2</span>', '27/25'],
    182.40: [2, '<span class="dnline1">D</span>', '<span class="dnline1">2</span>', '10/9'],
    200: [3, 'D', '2', '1769/1576'],
    203.91: [0, 'D', '2', '9/8'],
    274.58: [2, '‚ôØ<span class="dnline2">D</span>', '‚ôØ<span class="dnline2">2</span>', '75/64'],
    294.13: [1, '‚ô≠E', '‚ô≠3', '32/27'],
    300: [3, '‚ô≠E', '‚ô≠3', '1785/1501'],
    315.64: [2, '‚ô≠<span class="upline1">E</span>', '‚ô≠<span class="upline1">3</span>', '6/5'],
    317.60: [1, '‚ôØD', '‚ôØ2', '19683/16384'],
    337.15: [2, '‚ô≠<span class="upline2">E</span>', '‚ô≠<span class="upline2">3</span>', '243/200'],
    364.81: [2, '<span class="dnline2">E</span>', '<span class="dnline2">3</span>', '100/81'],
    384.36: [1, '‚ô≠F', '‚ô≠4', '8192/6561'],
    386.31: [2, '<span class="dnline1">E</span>', '<span class="dnline1">3</span>', '5/4'],
    400: [3, 'E', '3', '635/504'],
    407.82: [0, 'E', '3', '81/64'],
    427.37: [2, '‚ô≠<span class="upline2">F</span>', '‚ô≠<span class="upline2">4</span>', '32/25'],
    478.49: [2, '‚ôØ<span class="dnline2">E</span>', '‚ôØ<span class="dnline2">3</span>', '675/512'],
    498.04: [1, 'F', '4', '4/3'],
    500: [3, 'F', '4', '3544/2655'],
    519.55: [2, '<span class="upline1">F</span>', '<span class="upline1">4</span>', '27/20'],
    521.51: [1, '‚ôØE', '‚ôØ3', '177147/131072'],
    541.06: [2, '<span class="upline2">F</span>', '<span class="upline2">4</span>', '2187/1600'],
    568.72: [2, '‚ôØ<span class="dnline2">F</span>', '‚ôØ<span class="dnline2">4</span>', '25/18'],
    588.27: [1, '‚ô≠G', '‚ô≠5', '1024/729'],
    590.22: [2, '‚ôØ<span class="dnline1">F</span>', '‚ôØ<span class="dnline1">4</span>', '45/32'],
    600: [3, '‚ôØF', '‚ôØ4', '3363/2378'],
    609.77: [2, '‚ô≠<span class="upline1">G</span>', '‚ô≠<span class="upline1">5</span>', '64/45'],
    611.73: [1, '‚ôØF', '‚ôØ4', '729/512'],
    631.28: [2, '‚ô≠<span class="upline2">G</span>', '‚ô≠<span class="upline2">5</span>', '36/25'],
    680.45: [2, '<span class="dnline1">G</span>', '<span class="dnline1">5</span>', '40/27'],
    700: [3, 'G', '5', '2655/1772'],
    701.96: [0, 'G', '5', '3/2'],
    723.46: [2, '<span class="upline1">G</span>', '<span class="upline1">5</span>', '243/160'],
    772.63: [2, '‚ôØ<span class="dnline2">G</span>', '‚ôØ<span class="dnline2">5</span>', '25/16'],
    792.18: [1, '‚ô≠A', '‚ô≠6', '128/81'],
    794.13: [2, '‚ôØ<span class="dnline1">G</span>', '‚ôØ<span class="dnline1">5</span>', '405/256'],
    800: [3, '‚ôØG', '‚ôØ5', '4813/3032'],
    813.69: [2, '‚ô≠<span class="upline1">A</span>', '‚ô≠<span class="upline1">6</span>', '8/5'],
    815.64: [1, '‚ôØG', '‚ôØ5', '6561/4096'],
    835.20: [2, '‚ô≠<span class="upline2">A</span>', '‚ô≠<span class="upline2">6</span>', '81/50'],
    862.85: [2, '<span class="dnline2">A</span>', '<span class="dnline2">6</span>', '400/243'],
    884.36: [2, '<span class="dnline1">A</span>', '<span class="dnline1">6</span>', '5/3'],
    900: [3, 'A', '6', '3002/1785'],
    905.87: [1, 'A', '6', '27/16'],
    976.54: [2, '‚ôØ<span class="dnline2">A</span>', '‚ôØ<span class="dnline2">6</span>', '225/128'],
    996.09: [1, '‚ô≠B', '‚ô≠7', '16/9'],
    1000: [3, '‚ô≠B', '‚ô≠7', '4679/2626'],
    1017.59: [2, '‚ô≠<span class="upline1">B</span>', '‚ô≠<span class="upline1">7</span>', '9/5'],
    1019.55: [1, '‚ôØA', '‚ôØ6', '59049/32768'],
    1039.10: [2, '‚ô≠<span class="upline2">B</span>', '‚ô≠<span class="upline2">7</span>', '729/400'],
    1066.76: [2, '<span class="dnline2">B</span>', '<span class="dnline2">7</span>', '50/27'],
    1086.31: [1, '¬∑‚ô≠C', '¬∑‚ô≠1', '4096/2187'],
    1088.27: [2, '<span class="dnline1">B</span>', '<span class="dnline1">7</span>', '15/8'],
    1100: [3, 'B', '7', '2943/1559'],
    1107.82: [2, '¬∑‚ô≠<span class="upline1">C</span>', '¬∑‚ô≠<span class="upline1">1</span>', '256/135'],
    1109.78: [1, 'B', '7', '243/128'],
    1129.33: [2, '¬∑‚ô≠<span class="upline2">C</span>', '¬∑‚ô≠<span class="upline2">1</span>', '48/25'],
    1178.49: [2, '¬∑<span class="dnline1">C</span>', '¬∑<span class="dnline1">1</span>', '160/81'],
    1200: [0, 'C', '1', '2']
}

const Unique = arr => Array.from(new Set(arr)).filter(x => x !== undefined)

const Portion2Name = (a, mode) => { // Ëº∏ÂÖ•È†ªÁéáÊØîÔºåËº∏Âá∫Â∞çÊáâÁöÑÂî±Âêçmode 1 Èü≥Âêç 2Âî±Âêç 
    a = frc(a)
    while (Number(a) < 1) {
        a = a.mul(2)
    }
    while (Number(a) > 2) {
        a = a.div(2)
    }
    a = a.toFraction(false)
    for (const [key, value] of Object.entries(FushionList)) {
        if (value[3] === a) return value[mode]
    }
    // return '„ÄÄ'
}
// console.log(Portion2Name('243/240', 1))

const Portion2Pitch = (portion, one, OneDif) => { // Ëº∏ÂÖ•‰∏ÄÂº¶È†ªÁéá„ÄÅ‰∏ÄÂº¶ÊòØÂê¶Ë™ø‰∫ÜÔºåËº∏Âá∫Èü≥Âêç
    const Base = frc(one).div(OneDif || 1)
    return Portion2Name(frc(portion).div(Base).toFraction(false), 1)
}

const Name2Freq = a => { // Ëº∏ÂÖ•Èü≥ÂêçËº∏Âá∫Â∞çÊáâÈ†ªÁéá
    for (const [key, value] of Object.entries(FushionList)) {
        if (value[1] === a || value[2] === a || value[3] === a) {
            return key
        }
    }
}
// console.log(Name2Freq('‚ô≠G'))

const Freq2Pitch = a => { // Ëº∏ÂÖ•È†ªÁéáÊØîÔºåËº∏Âá∫Â∞çÊáâÁöÑÂî±Âêç
    a = frc(a)
    while (Number(a) < 1) {
        a = a.mul(2)
    }
    while (Number(a) > 2) {
        a = a.div(2)
    }
    a = a.toFraction(false)
    for (const [key, value] of Object.entries(FushionList)) {
        if (value[3] === a) return value[1]
    }
}

export const OctaveCent = (a, b) => { // ÂÖ©ÂÄãË¶ÅÊØîËºÉÁöÑÈ†ªÁéá
    a = Frac2FalseFrac(a).Deci
    b = Frac2FalseFrac(b).Deci
    const Octave = Math.log2(a / b)
    const Cent = Octave * 1200
    const Print = `ÂÖ´Â∫¶ÂÄ§ ${Octave}
Èü≥ÂàÜ ${Cent}`
    return { Print, Octave, Cent }
}
// console.log(OctaveCent('4/3', 1))

export const Frequency = a => 2 ** (a / 1200)

const FretListA = [0, '1/8', '1/6', '1/5', '1/4', '1/3', '2/5', '1/2', '3/5', '2/3', '3/4', '4/5', '5/6', '7/8', 1]
const FretList = ['1/9', '1/8', '1/6', '1/5', '1/4', '1/3', '2/5', '1/2', '3/5', '2/3', '3/4', '4/5', '5/6', '7/8', '8/9', '9/10', 1] // 0, 14ÊòØÂæΩÂ§ñ13.111(Â§ßÂÖ®Èü≥)Ôºå15ÊòØÂ§ñÂ§ñ13.2ÔºàÂ∞èÂÖ®Èü≥Ôºâ„ÄÇ‰∫îÂ∫¶ÂæãÁöÑ‰∏âÂÄãÂæΩÂ§ñÔºö8/9ÔºàÂ§ßÂÖ®Èü≥204Ôºâ, 243/256Ôºà90Èü≥ÂàÜ13.492Ôºâ, 2048/2187Ôºà82Èü≥ÂàÜ13.594Ôºâ

export const Fret2LengPrint = x => { // ÂæΩ‰ΩçËΩâÂº¶Èï∑. ÊîØÊåÅ 13.111Ôºå13 1/9Ôºå118/9
    if (Math.floor(+x) === +x) {
        return FretList[+x]
    }
    x = frc(x).simplify()
    if (x.compare(14) >= 0 || x.compare(0) < 0) {
        throw (new Error('Ë´ãËº∏ÂÖ•13ÂæΩ‰ª•ÂÖßÁöÑÊï∏Â≠ó'))
    }
    const Fret = x.floor()
    const Frac = x.sub(Fret)
    const Leng = frc(FretListA[Fret]).add(Frac.mul(frc(FretListA[Fret + 1]).sub(FretListA[Fret])))
    return Leng.toFraction()
}
// console.log(Fret2Leng('13.111'))

const Fret2Leng = x => { // ÂæΩ‰ΩçËΩâÂº¶Èï∑ ÊîØÊåÅ 13.111Ôºå13 1/9Ôºå118/9
    x = frc(x).simplify()
    const xNum = Number(x)
    const Fret = x.floor()
    if (Fret === xNum) {
        if (xNum === -1) {
            return '1/10' // 15ÂæΩÊ≥õÈü≥‰ª•7ÂæΩÂ∞çÁ®±Â∞±ËÆäÊàê‰∫Ü-1
        }
        return FretList[xNum]
    }
    const Frac = x.sub(Fret)
    const Leng = frc(FretList[Fret]).add(Frac.mul(frc(FretList[Fret + 1]).sub(FretList[Fret])))
    return Leng.toFraction()
}
// console.log(Fret2Leng('16'))

export const Leng2Fret = x => { // Âº¶Èï∑ËΩâÂæΩ‰Ωç
    x = frc(x)
    let Fret = 0
    for (let i = 0; i <= 13; i++) {
        if (x.compare(FretListA[i]) >= 0 && x.compare(FretListA[i + 1]) < 0) {
            Fret = i
            break
        }
    }
    const Result = frc(Fret).add(x.sub(FretListA[Fret]).div(frc(FretListA[Fret + 1]).sub(FretListA[Fret])))
    return +Number(Result).toFixed(3)
}
// console.log(Leng2Fret('11/20'))


const ExhastFret = () => { // Áê¥‰∏äÊâÄÊúâÂæΩ‰Ωç
    let List1 = [], List2 = [], List3 = [], List = []
    for (const [key, value] of Object.entries(FushionList)) {
        List1 = List1.concat(Leng2Fret(frc(1).div(value[3]).toFraction(false)))
    }
    for (const [key, value] of Object.entries(FushionList)) {
        List2 = List2.concat(Leng2Fret(frc(1).div(value[3]).div(2).toFraction(false)))
    }
    for (const [key, value] of Object.entries(FushionList)) {
        List3 = List3.concat(Leng2Fret(frc(1).div(value[3]).div(4).toFraction(false)))
    }
    List1 = Unique(List1)
    List1 = List1.sort((a, b) => a - b)
    List2 = Unique(List2)
    List2 = List2.sort((a, b) => a - b)
    List3 = Unique(List3)
    List3 = List3.sort((a, b) => a - b)
    for (let i = 0; i < List2.length; i++) {
        List[i] = List1[i] + 'Ôºå' + List2[i] + 'Ôºå' + List3[i] + '„ÄÇ'
    }
    return List
}
// console.log(ExhastFret())

export const Pythagorean = x => {
    const upA = [], upB = [], downA = [], downB = [], Cent1 = [], Cent2 = []
    upA[0] = x
    upB[0] = x
    downA[0] = x
    downB[0] = x
    Cent1[0] = 0
    Cent2[0] = 0
    for (let i = 1; i <= 12; i++) {
        upA[i] = frc(upA[i - 1]).mul('3/2')
        while (upA[i] >= frc(x).mul(2)) {
            upA[i] = upA[i].div(2)
        }
        const Tmp = Number(upA[i])
        upA[i] = upA[i].toFraction(true)
        Cent1[i] = OctaveCent(Tmp, x).Cent.toFixed(8)
    }
    for (let i = 1; i <= 12; i++) {
        upB[i] = frc(upB[i - 1]).mul('3/4')
        while (upB[i] < frc(x).div(2)) {
            upB[i] = upB[i].mul(2)
        }
        upB[i] = upB[i].toFraction(true)
    }
    for (let i = 1; i <= 12; i++) {
        downA[i] = frc(downA[i - 1]).mul('2/3')
        while (downA[i] < frc(x).div(2)) {
            downA[i] = downA[i].mul(2)
        }
        downA[i] = downA[i].toFraction(true)
    }
    for (let i = 1; i <= 12; i++) {
        downB[i] = frc(downB[i - 1]).mul('4/3')
        while (downB[i] >= frc(x).mul(2)) {
            downB[i] = downB[i].div(2)
        }
        const Tmp = Number(downB[i])
        downB[i] = downB[i].toFraction(true)
        Cent2[i] = OctaveCent(Tmp, x).Cent.toFixed(8)
    }
    const Print1 = [{
        title: 'Âêë‰∏äA',
        data: upA
    }, {
        title: 'Âêë‰∏äB',
        data: upB
    }, {
        title: 'Èü≥ÂàÜ',
        data: Cent1
    }]
    const Print2 = [{
        title: 'Âêë‰∏ãA',
        data: downA
    }, {
        title: 'Âêë‰∏ãB',
        data: downB
    }, {
        title: 'Èü≥ÂàÜ',
        data: Cent2
    }]
    return { Print1, Print2 }
}

export const Pythagorean60 = x => {
    const upA = [], Cent1 = []
    upA[0] = x
    Cent1[0] = 0
    for (let i = 1; i < 60; i++) {
        const Func1 = BigFrc(upA[i - 1], '3/2')
        upA[i] = Func1.Frac
        let Deci = Func1.Deci
        while (Deci >= Number(frc(x).mul(2))) {
            const Func2 = BigFrc(upA[i], '1/2')
            upA[i] = Func2.Frac
            Deci = Func2.Deci
        }
        Cent1[i] = OctaveCent(Deci, x).Cent.toFixed(8)
    }
    const Print1 = [{
        title: 'Âêë‰∏ä',
        data: upA
    }, {
        title: 'Èü≥ÂàÜ',
        data: Cent1
    }]
    return Print1
}
// console.log(Pythagorean60(81))
export const Justoni = x => {
    x = x.toString()
    const List1 = [], List2 = [], List3 = [], Cent1 = [], Cent2 = [], Cent3 = []
    List1[0] = x
    Cent1[0] = ''
    for (let i = 1; i <= 3; i++) {
        List1[i] = frc(List1[i - 1]).mul('3/2')
        while (List1[i] >= frc(x).mul(2)) {
            List1[i] = List1[i].div(2)
        }
        if (x === '1') {
            List1[i] = List1[i].toFraction()
        } else {
            List1[i] = List1[i].toFraction(true)
        }
        Cent1[i] = OctaveCent(Number(frc(List1[i])), x).Cent.toFixed(8)
    }
    for (let i = 0; i <= 3; i++) {
        List2[i] = frc(List1[i]).mul('5/4')
        while (List2[i] >= frc(x).mul(2)) {
            List2[i] = List2[i].div(2)
        }
        if (x === '1') {
            List2[i] = List2[i].toFraction()
        } else {
            List2[i] = List2[i].toFraction(true)
        }
        Cent2[i] = OctaveCent(Number(frc(List2[i])), x).Cent.toFixed(8)
    }
    for (let i = 0; i <= 3; i++) {
        List3[i] = frc(List1[i]).mul('6/5')
        while (List3[i] >= frc(x).mul(2)) {
            List3[i] = List3[i].div(2)
        }
        if (x === '1') {
            List3[i] = List3[i].toFraction()
        } else {
            List3[i] = List3[i].toFraction(true)
        }
        Cent3[i] = OctaveCent(Number(frc(List3[i])), x).Cent.toFixed(8)
    }
    const Print = [{
        title: 'È†ªÁéá',
        data: [...List1, ...List2, ...List3]
    }, {
        title: 'Èü≥ÂàÜ',
        data: [...Cent1, ...Cent2, ...Cent3]
    }]
    return Print
}
// console.log(Justoni(1))

/**
 * ÂçÅ‰∫åÂπ≥ÂùáÂæã„ÄÇÊñ∞Ê≥ïÂØÜÁéá
 * @param CFreq cÁöÑÈ†ªÁéá
 * @returns 
 */
export const EqualTemp = CFreq => {
    CFreq = CFreq.toString()
    let a = CFreq
    if (CFreq.includes('/')) {
        a = CFreq.split('/')
        a = big.div(a[0], a[1])
    }
    const List = [], List1 = [], Cent = []
    List[0] = CFreq
    List1[0] = CFreq
    Cent[0] = 0
    for (let i = 1; i <= 12; i++) {
        List[i] = big(a).mul(big(2).pow(big.div(i, 12)))
        if (i === 12) {
            List1[i] = List[i].toNumber()
        } else {
            List1[i] = List[i].toFixed(24)
        }
        Cent[i] = +OctaveCent(List1[i], a).Cent.toFixed(12)
    }
    const Print = [{
        title: 'È†ªÁéá',
        data: List1
    }, {
        title: 'Èü≥ÂàÜ',
        data: Cent
    }]
    return { Print, List1 }
}
// console.log(EqualTemp('1').Print)
// console.log(big(2).pow(big.div(1, 12)).toString())
// 1.059463094359295264561825294946341700779204317494185628559208431
// 1.059463094359295264561825 // Êú±ËºâÂ†â25‰ΩçÂ§ßÁÆóÁõ§

const TuningSub1 = (KnownFreq, KnownFret, UnknownFret) => frc(KnownFreq).div(Fret2Leng(KnownFret)).mul(Fret2Leng(UnknownFret)).toFraction(false) // Â∑≤Áü•Âº¶È†ªÁéáÊØîÔºà‰∏çÊòØÂØ¶ÈöõÈ†ªÁéáÔºâÔºåÂ∑≤Áü•Âº¶ÂæΩ‰ΩçÔºåÊâÄÊ±ÇÂº¶ÂæΩ‰Ωç„ÄÇÈÄôÂÄãÊ≤íÂàÜÊòØÊ≥õÈü≥ÈÇÑÊòØÊåâÈü≥ÔºåÊâÄ‰ª•Â¶ÇÊûúÊòØÊ≥õÈü≥Ë™øÂº¶Ôºå‰∏ÄÂÆöË¶Å‰∏ÉÂæΩ‰ª•‰∏ä„ÄÇÊï£Èü≥ÊòØ14

const TuningSub2 = (List, a, n) => { // ÊääÈªòË™çÁöÑÂÆÆÂº¶ÊèõÊàêËá™ÂÆöÁæ©ÁöÑÂÆÆÂº¶
    if (a !== n && n !== 0) {
        const p = frc(1).div(List[n])
        for (let i = 1; i <= 7; i++) {
            List[i] = frc(List[i]).mul(p).toFraction(false)
        }
    }
    return List
}

const TuningSub3 = (PortionList, Unmoved, Unmoved2Five, Freq) => { // ÂêÑÂº¶È†ªÁéáÊØîÔºåÈÇ£Ê†πÂº¶Ê≤íÂãï‰ΩúÁÇ∫Âü∫Ê∫ñÔºåÈÄôÊ†πÂº¶Âà∞‰∫îÂº¶Ê≠£Ë™øÁöÑÊØî‰æãÔºå‰∫îÂº¶Âü∫Ê∫ñÈ†ªÁéá
    Freq = frc(Unmoved2Five).mul(Freq)
    const FreqList = []
    for (let i = 1; i <= 7; i++) {
        FreqList[i] = Number(frc(Freq).mul(frc(PortionList[i]).div(PortionList[Unmoved])))
    }
    return FreqList
}

const Tuning1 = (Freq = 432, n = 3) => { // ÂÆÆË™ø. ‰∫îÂº¶Âü∫Ê∫ñÈ†ªÁéáÔºåÈªòË™çÂÆÆÂº¶ÔºåËá™ÂÆöÂÆÆÂº¶
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 3
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    Zhun[1] = TuningSub1(Zhun[3], 5, 4)
    Zhun[4] = TuningSub1(Zhun[6], 5, 4)
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[5] = TuningSub1(Zhun[7], 5, 4)
    Zhun[2] = TuningSub1(Zhun[7], 7, 4)
    // ÂæΩÊ≥ï‰∏Ä
    Hui[6] = TuningSub1(Hui[3], 5, 7)
    Hui[1] = TuningSub1(Hui[3], 5, 4)
    Hui[4] = TuningSub1(Hui[6], 5, 4)
    Hui[5] = TuningSub1(Hui[3], 6, 7)
    Hui[7] = TuningSub1(Hui[5], 4, 5)
    Hui[2] = TuningSub1(Hui[7], 7, 4)
    // ÂæΩ‰∫å
    Hui2[6] = TuningSub1(Hui2[3], 5, 7)
    Hui2[1] = TuningSub1(Hui2[3], 5, 4)
    Hui2[5] = TuningSub1(Hui2[3], 6, 7)
    Hui2[7] = TuningSub1(Hui2[5], 4, 5)
    Hui2[2] = TuningSub1(Hui2[7], 7, 4)
    Hui2[4] = TuningSub1(Hui2[7], 7, 5)
    // ÂæΩ‰∏â
    Hui3[6] = TuningSub1(Hui3[3], 5, 7)
    Hui3[1] = TuningSub1(Hui3[3], 5, 4)
    Hui3[4] = TuningSub1(Hui3[6], 5, 4)
    Hui3[5] = TuningSub1(Hui3[3], 6, 7)
    Hui3[7] = TuningSub1(Hui3[4], 5, 7)
    Hui3[2] = TuningSub1(Hui3[7], 7, 4)
    // ÂæΩÂõõ
    Hui4[5] = TuningSub1(Hui4[3], 6, 7)
    Hui4[7] = TuningSub1(Hui4[5], 4, 5)
    Hui4[4] = TuningSub1(Hui4[7], 7, 5)
    Hui4[2] = TuningSub1(Hui4[7], 7, 4)
    Hui4[1] = TuningSub1(Hui4[4], 7, 5)
    Hui4[6] = TuningSub1(Hui4[1], 4, 7)
    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 5, '1', Freq)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = Freq
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Xin, Hui2, Hui3, Hui4, ZhunFreq, HuiFreq, Name: 'ÂÆÆË™ø 5 6 1 2 3' }
}
// console.log(Tuning1(432, 1).Zhun)

const Tuning2 = (Freq = 432, n = 1) => { // ÂïÜË™ø
    n = n === 0 ? 1 : n
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 3
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    Zhun[1] = TuningSub1(Zhun[3], 5, 4)
    Zhun[4] = TuningSub1(Zhun[6], 5, 4)
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[5] = TuningSub1(Zhun[7], 5, 4)
    Zhun[2] = TuningSub1(Zhun[7], 7, 4)

    Hui2[6] = TuningSub1(Hui2[3], 5, 7)
    Hui2[1] = TuningSub1(Hui2[3], 5, 4)
    Hui2[4] = TuningSub1(Hui2[6], 5, 4)
    Hui2[5] = TuningSub1(Hui2[3], 6, 7)
    Hui2[7] = TuningSub1(Hui2[5], 4, 5)
    Hui2[2] = TuningSub1(Hui2[7], 7, 4)

    Hui4[6] = TuningSub1(Hui4[3], 5, 7)
    Hui4[1] = TuningSub1(Hui4[3], 5, 4)
    Hui4[5] = TuningSub1(Hui4[3], 6, 7)
    Hui4[7] = TuningSub1(Hui4[5], 4, 5)
    Hui4[4] = TuningSub1(Hui4[7], 7, 5)
    Hui4[2] = TuningSub1(Hui4[7], 7, 4)

    Hui[6] = TuningSub1(Hui[3], 5, 7)
    Hui[1] = TuningSub1(Hui[3], 5, 4)
    Hui[4] = TuningSub1(Hui[6], 5, 4)
    Hui[5] = TuningSub1(Hui[3], 6, 7)
    Hui[7] = TuningSub1(Hui[4], 5, 7)
    Hui[2] = TuningSub1(Hui[7], 7, 4)
    // ÂæΩ‰∏âÂêåÊ∫ñ
    Hui3[6] = TuningSub1(Hui3[3], 5, 7)
    Hui3[1] = TuningSub1(Hui3[3], 5, 4)
    Hui3[4] = TuningSub1(Hui3[6], 5, 4)
    Hui3[7] = TuningSub1(Hui3[4], 5, 7)
    Hui3[5] = TuningSub1(Hui3[7], 5, 4)
    Hui3[2] = TuningSub1(Hui3[7], 7, 4)
    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 5, '1', Freq)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = Freq
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Xin, Hui2, Hui3, Hui4, ZhunFreq, HuiFreq, Name: 'ÂïÜË™ø 1 2 4 5 6' }
}

const Tuning4 = (Freq = 432, n = 4) => { // ÂæµË™ø
    let Zhun = [], Hui = [], Hui2 = [], Hui4 = [], Xin = []
    const a = 4
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui4[a] = '1'

    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[5] = TuningSub1(Zhun[7], 5, 4)
    Zhun[2] = TuningSub1(Zhun[7], 7, 4)
    Zhun[6] = TuningSub1(Zhun[4], 4, 5)
    Zhun[3] = TuningSub1(Zhun[6], 7, 5)
    Zhun[1] = TuningSub1(Zhun[3], 5, 4)

    Hui[7] = TuningSub1(Hui[4], 5, 7)
    Hui[5] = TuningSub1(Hui[7], 5, 4)
    Hui[2] = TuningSub1(Hui[7], 7, 4)
    Hui[1] = TuningSub1(Hui[4], 7, 5)
    Hui[6] = TuningSub1(Hui[1], 4, 7)
    Hui[3] = TuningSub1(Hui[2], 5, 6)

    Hui2[1] = TuningSub1(Hui2[4], 7, 5)
    Hui2[6] = TuningSub1(Hui2[1], 4, 7)
    Hui2[7] = TuningSub1(Hui2[4], 5, 7)
    Hui2[2] = TuningSub1(Hui2[7], 7, 4)
    Hui2[3] = TuningSub1(Hui2[2], 5, 6)
    Hui2[5] = TuningSub1(Hui2[6], 6, 5)

    Hui4[1] = TuningSub1(Hui4[4], 7, 5)
    Hui4[6] = TuningSub1(Hui4[1], 4, 7)
    Hui4[5] = TuningSub1(Hui4[6], 6, 5)
    Hui4[3] = TuningSub1(Hui4[4], 9, 8)
    Hui4[7] = TuningSub1(Hui4[5], 4, 5)
    Hui4[2] = TuningSub1(Hui4[7], 7, 4)


    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 5, '1', Freq)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = Freq
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Xin, Hui2, Hui4, ZhunFreq, HuiFreq, Name: 'ÂæµË™ø 4 5 ‚ô≠7 1 2' }
}

const Tuning5 = (Freq = 432, n = 2) => { // ÁæΩË™ø
    let Zhun = [], Hui = [], Hui4 = [], Xin = []
    const a = 2
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[7] = TuningSub1(Zhun[2], 4, 7)
    Zhun[4] = TuningSub1(Zhun[7], 7, 5)
    Zhun[6] = TuningSub1(Zhun[4], 4, 5)
    Zhun[3] = TuningSub1(Zhun[6], 7, 5)
    Zhun[1] = TuningSub1(Zhun[3], 5, 4)
    Zhun[5] = TuningSub1(Zhun[7], 5, 4)

    // ‰∏Ä‰∫å‰∏âÂêå
    Hui[7] = TuningSub1(Hui[2], 4, 7)
    Hui[5] = TuningSub1(Hui[7], 5, 4)
    Hui[3] = TuningSub1(Hui[5], 7, 6)
    Hui[6] = TuningSub1(Hui[3], 5, 7)
    Hui[1] = TuningSub1(Hui[3], 5, 4)
    Hui[4] = TuningSub1(Hui[2], 4, 5)

    Hui4[4] = TuningSub1(Hui4[2], 4, 5)
    Hui4[5] = TuningSub1(Hui4[4], 8, 9)
    Hui4[7] = TuningSub1(Hui4[2], 4, 7)
    Hui4[3] = TuningSub1(Hui4[7], 5, 3)
    Hui4[6] = TuningSub1(Hui4[3], 5, 7)
    Hui4[1] = TuningSub1(Hui4[3], 5, 4)

    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 5, '1', Freq)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = Freq
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Xin, Hui4, ZhunFreq, HuiFreq, Name: 'ÁæΩË™ø ‚ô≠7 1 ‚ô≠3 4 5' }
}

const Tuning6 = (Freq = 432, n = 5) => {  // Ëï§Ë≥ìË™øÁ∑ä‰∫î 2 3 5 6 1 2 3
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 5
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[3] = TuningSub1(Zhun[5], 5, 4)
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    Zhun[4] = TuningSub1(Zhun[6], 5, 4)
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[2] = TuningSub1(Zhun[7], 7, 4)
    Zhun[1] = TuningSub1(Zhun[6], 7, 4)
    // ÂæΩÊ≥ïÂæã
    Hui[3] = TuningSub1(Hui[5], 5, 4)
    Hui[1] = TuningSub1(Hui[3], 5, 4)
    Hui[6] = TuningSub1(Hui[3], 5, 7)
    Hui[4] = TuningSub1(Hui[5], 6, 5)
    Hui[7] = TuningSub1(Hui[5], 6, 7)
    Hui[2] = TuningSub1(Hui[5], 6, 4)

    Hui2[3] = TuningSub1(Hui2[5], 5, 4)
    Hui2[4] = TuningSub1(Hui2[5], 6, 5)
    Hui2[7] = TuningSub1(Hui2[5], 6, 7)
    Hui2[2] = TuningSub1(Hui2[5], 6, 4)
    Hui2[1] = TuningSub1(Hui2[4], 7, 5)
    Hui2[6] = TuningSub1(Hui2[1], 4, 7)

    Hui3[3] = TuningSub1(Hui3[5], 5, 4)
    Hui3[1] = TuningSub1(Hui3[3], 5, 4)
    Hui3[6] = TuningSub1(Hui3[3], 5, 7)
    Hui3[4] = TuningSub1(Hui3[6], 5, 4)
    Hui3[7] = TuningSub1(Hui3[5], 6, 7)
    Hui3[2] = TuningSub1(Hui3[5], 6, 4)

    Hui4[4] = TuningSub1(Hui4[5], 6, 5)
    Hui4[7] = TuningSub1(Hui4[5], 6, 7)
    Hui4[2] = TuningSub1(Hui4[5], 6, 4)
    Hui4[1] = TuningSub1(Hui4[4], 7, 5)
    Hui4[6] = TuningSub1(Hui4[1], 4, 7)
    Hui4[3] = TuningSub1(Hui4[1], 4, 5)

    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 3, '64/81', Freq)
    const HuiFreq = TuningSub3(Hui, 3, '4/5', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[1]
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Xin, Hui2, Hui3, Hui4, ZhunFreq, HuiFreq, Name: 'Ëï§Ë≥ìË™ø„ÄÄÁ∑ä‰∫î' }
}

const Tuning7 = (Freq = 432, n = 2) => {  // Ê∏ÖÂïÜË™øÁ∑ä‰∫å‰∫î‰∏É 6 1 2 3 5 6 7
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 2
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[5] = TuningSub1(Zhun[2], 5, 7)
    Zhun[3] = TuningSub1(Zhun[5], 5, 4)
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    Zhun[1] = TuningSub1(Zhun[3], 5, 4)
    Zhun[4] = TuningSub1(Zhun[6], 5, 4)
    Zhun[7] = TuningSub1(Zhun[2], 4, 7)
    // ÂæΩÊ≥ïÂæã
    Hui[4] = TuningSub1(Hui[2], 6, 7)
    Hui[5] = TuningSub1(Hui[2], 5, 7)
    Hui[3] = TuningSub1(Hui[5], 5, 4)
    Hui[6] = TuningSub1(Hui[4], 4, 5)
    Hui[1] = TuningSub1(Hui[6], 7, 4)
    Hui[7] = TuningSub1(Hui[2], 4, 7)

    Hui2[4] = TuningSub1(Hui2[2], 6, 7)
    Hui2[5] = TuningSub1(Hui2[2], 5, 7)
    Hui2[6] = TuningSub1(Hui2[4], 4, 5)
    Hui2[1] = TuningSub1(Hui2[6], 7, 4)
    Hui2[3] = TuningSub1(Hui2[6], 7, 5)
    Hui2[7] = TuningSub1(Hui2[2], 4, 7)

    Hui3[4] = TuningSub1(Hui3[2], 6, 7)
    Hui3[5] = TuningSub1(Hui3[2], 5, 7)
    Hui3[3] = TuningSub1(Hui3[5], 5, 4)
    Hui3[6] = TuningSub1(Hui3[3], 5, 7)
    Hui3[1] = TuningSub1(Hui3[6], 7, 4)
    Hui3[7] = TuningSub1(Hui3[2], 4, 7)

    Hui4[4] = TuningSub1(Hui4[2], 6, 7)
    Hui4[6] = TuningSub1(Hui4[4], 4, 5)
    Hui4[3] = TuningSub1(Hui4[6], 7, 5)
    Hui4[5] = TuningSub1(Hui4[3], 4, 5)
    Hui4[1] = TuningSub1(Hui4[6], 7, 4)
    Hui4[7] = TuningSub1(Hui4[2], 4, 7)

    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 3, '64/81', Freq)
    const HuiFreq = TuningSub3(Hui, 3, '4/5', Freq)
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[6] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[1]
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Xin, Hui2, Hui3, Hui4, ZhunFreq, HuiFreq, Name: 'Ê∑∏ÂïÜË™ø„ÄÄÁ∑ä‰∫å‰∫î‰∏É' }
}

const Tuning8 = (Freq = 432, n = 1) => {  // ÊÖ¢ËßíË™øÊÖ¢‰∏â 1 2 3 5 6 1 2
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 1
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[4] = TuningSub1(Zhun[1], 5, 7)
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[2] = TuningSub1(Zhun[7], 7, 4)
    Zhun[5] = TuningSub1(Zhun[2], 5, 7)
    Zhun[3] = TuningSub1(Zhun[5], 5, 4)
    Zhun[6] = TuningSub1(Zhun[1], 4, 7)
    // ÂæΩÊ≥ïÂæã
    Hui[4] = TuningSub1(Hui[1], 5, 7)
    Hui[7] = TuningSub1(Hui[4], 5, 7)
    Hui[2] = TuningSub1(Hui[4], 5, 4)
    Hui[3] = TuningSub1(Hui[1], 6, 7)
    Hui[5] = TuningSub1(Hui[3], 4, 5)
    Hui[6] = TuningSub1(Hui[1], 4, 7)

    Hui2[4] = TuningSub1(Hui2[1], 5, 7)
    Hui2[3] = TuningSub1(Hui2[1], 6, 7)
    Hui2[5] = TuningSub1(Hui2[3], 4, 5)
    Hui2[2] = TuningSub1(Hui2[5], 7, 5)
    Hui2[7] = TuningSub1(Hui2[2], 4, 7)
    Hui2[6] = TuningSub1(Hui2[1], 4, 7)

    Hui3[4] = TuningSub1(Hui3[1], 5, 7)
    Hui3[7] = TuningSub1(Hui3[4], 5, 7)
    Hui3[2] = TuningSub1(Hui3[4], 5, 4)
    Hui3[3] = TuningSub1(Hui3[1], 6, 7)
    Hui3[5] = TuningSub1(Hui3[2], 5, 7)
    Hui3[6] = TuningSub1(Hui3[1], 4, 7)

    Hui4[3] = TuningSub1(Hui4[1], 6, 7)
    Hui4[5] = TuningSub1(Hui4[3], 4, 5)
    Hui4[2] = TuningSub1(Hui4[5], 7, 5)
    Hui4[7] = TuningSub1(Hui4[2], 4, 7)
    Hui4[4] = TuningSub1(Hui4[7], 7, 5)
    Hui4[6] = TuningSub1(Hui4[1], 4, 7)

    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    // const ZhunFreq = TuningSub3(Zhun, 2, '2/3', Freq)
    const ZhunFreq = TuningSub3(Zhun, 5, '1', Freq)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[7] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[12] / 2
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Hui2, Hui3, Hui4, Xin, ZhunFreq, HuiFreq, Name: 'ÊÖ¢ËßíË™ø„ÄÄÊÖ¢‰∏â' }
}

const Tuning9 = (Freq = 432, n = 4) => {  // ÊÖ¢ÂÆÆË™øÊÖ¢‰∏Ä‰∏âÂÖ≠ 3 5 6 1 2 3 5
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 4
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[2] = TuningSub1(Zhun[7], 7, 4)
    Zhun[5] = TuningSub1(Zhun[7], 5, 4)
    Zhun[3] = TuningSub1(Zhun[5], 5, 4)
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    Zhun[1] = TuningSub1(Zhun[6], 7, 4)
    // ÂæΩÊ≥ïÂæã    
    Hui[3] = TuningSub1(Hui[4], 6, 5)
    Hui[6] = TuningSub1(Hui[4], 6, 7)
    Hui[1] = TuningSub1(Hui[6], 7, 4)
    Hui[2] = TuningSub1(Hui[4], 5, 4)
    Hui[7] = TuningSub1(Hui[4], 5, 7)
    Hui[5] = TuningSub1(Hui[7], 5, 4)

    Hui2[3] = TuningSub1(Hui2[4], 6, 5)
    Hui2[6] = TuningSub1(Hui2[4], 6, 7)
    Hui2[1] = TuningSub1(Hui2[6], 7, 4)
    Hui2[2] = TuningSub1(Hui2[4], 5, 4)
    Hui2[7] = TuningSub1(Hui2[4], 5, 7)
    Hui2[5] = TuningSub1(Hui2[3], 4, 5)

    Hui3[6] = TuningSub1(Hui3[4], 6, 7)
    Hui3[1] = TuningSub1(Hui3[6], 7, 4)
    Hui3[2] = TuningSub1(Hui3[4], 5, 4)
    Hui3[7] = TuningSub1(Hui3[4], 5, 7)
    Hui3[5] = TuningSub1(Hui3[7], 5, 4)
    Hui3[3] = TuningSub1(Hui3[5], 5, 4)

    Hui4[3] = TuningSub1(Hui4[4], 6, 5)
    Hui4[6] = TuningSub1(Hui4[4], 6, 7)
    Hui4[1] = TuningSub1(Hui4[6], 7, 4)
    Hui4[5] = TuningSub1(Hui4[3], 4, 5)
    Hui4[7] = TuningSub1(Hui4[5], 4, 5)
    Hui4[2] = TuningSub1(Hui4[7], 7, 4)

    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 5, '1', Freq)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[2] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[7] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[12] / 2
    Xin[6] = +List12[2]
    Xin[7] = +List12[5]
    return {
        Zhun, Hui, Hui2, Hui3, Hui4, Xin, ZhunFreq, HuiFreq,
        OneDifZhun: '243/256',
        OneDifHui: '15/16',
        OneDifXin: 0.94387431268169,
        Name: 'ÊÖ¢ÂÆÆË™ø„ÄÄÊÖ¢‰∏Ä‰∏âÂÖ≠'
    }
}

const Tuning10 = (Freq = 432, n = 1) => {  // ÂæΩÊ≥ïÂæãÊ∑íÊ∂ºË™øÁ∑ä‰∫å‰∫î 5 #6 1 2 4 5 6
    let Hui3 = [], Zhun = [], Hui2 = [], Hui4 = [], Xin = []
    const a = 1
    Hui3[a] = '1'
    Zhun[a] = '1'
    Hui2[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ï
    Zhun[3] = TuningSub1(Zhun[1], 4, 5)
    Zhun[2] = TuningSub1(Zhun[3], 10, 9)
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    Zhun[4] = TuningSub1(Zhun[6], 5, 4)
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[5] = TuningSub1(Zhun[3], 4, 5)
    // ÂæΩÊ≥ïÂæã
    Hui2[6] = TuningSub1(Hui2[1], 4, 7)
    Hui2[2] = TuningSub1(Hui2[6], 5, 3)
    Hui2[3] = TuningSub1(Hui2[6], 7, 5)
    Hui2[5] = TuningSub1(Hui2[2], 5, 7)
    Hui2[4] = TuningSub1(Hui2[6], 5, 4)
    Hui2[7] = TuningSub1(Hui2[3], 3, 5)

    Hui3[6] = TuningSub1(Hui3[1], 4, 7)
    Hui3[3] = TuningSub1(Hui3[6], 7, 5)
    Hui3[2] = TuningSub1(Hui3[6], 5, 3)
    Hui3[5] = TuningSub1(Hui3[2], 5, 7)
    Hui3[4] = TuningSub1(Hui3[6], 5, 4)
    Hui3[7] = TuningSub1(Hui3[4], 5, 7)

    Hui4[6] = TuningSub1(Hui4[1], 4, 7)
    Hui4[2] = TuningSub1(Hui4[6], 5, 3)
    Hui4[3] = TuningSub1(Hui4[6], 7, 5)
    Hui4[5] = TuningSub1(Hui4[2], 5, 7)
    Hui4[7] = TuningSub1(Hui4[3], 3, 5)
    Hui4[4] = TuningSub1(Hui4[7], 7, 5)

    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    Zhun = TuningSub2(Zhun, a, n)
    // const HuiFreq = TuningSub3(Hui, 3, '4/5', Freq)
    const ZhunFreq = TuningSub3(Zhun, 3, '4/5', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[6] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[1]
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Hui3, Zhun, Hui2, Hui4, Xin, ZhunFreq, Name: 'Ê•öÂïÜË™ø„ÄÄÁ∑ä‰∫å‰∫î' }
}

const Tuning11 = (Freq = 432, n = 1) => {  // ÈªÉÈêòË™øÁ∑ä‰∫îÊÖ¢‰∏Ä 1 3 5 6 1 2 3 Êàñ 4 6 1 2 4 5 6
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 1
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[5] = TuningSub1(Zhun[1], 4, 7)
    Zhun[3] = TuningSub1(Zhun[5], 5, 4)
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    Zhun[4] = TuningSub1(Zhun[6], 5, 4)
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[2] = TuningSub1(Zhun[7], 7, 4)
    // ÂæΩÊ≥ïÂæã
    Hui[2] = TuningSub1(Hui[1], 3, 4)
    Hui[3] = TuningSub1(Hui[1], 5, 7)
    Hui[4] = TuningSub1(Hui[1], 3, 5)
    Hui[5] = TuningSub1(Hui[1], 4, 7)
    Hui[7] = TuningSub1(Hui[2], 4, 7)
    Hui[6] = TuningSub1(Hui[3], 5, 7)

    Hui2[2] = TuningSub1(Hui2[1], 3, 4)
    Hui2[3] = TuningSub1(Hui2[1], 5, 7)
    Hui2[4] = TuningSub1(Hui2[1], 3, 5)
    Hui2[5] = TuningSub1(Hui2[1], 4, 7)
    Hui2[7] = TuningSub1(Hui2[2], 4, 7)
    Hui2[6] = TuningSub1(Hui2[4], 4, 5)

    Hui3[2] = TuningSub1(Hui3[1], 3, 4)
    Hui3[3] = TuningSub1(Hui3[1], 5, 7)
    Hui3[5] = TuningSub1(Hui3[1], 4, 7)
    Hui3[7] = TuningSub1(Hui3[2], 4, 7)
    Hui3[6] = TuningSub1(Hui3[3], 5, 7)
    Hui3[4] = TuningSub1(Hui3[6], 5, 4)

    Hui4[2] = TuningSub1(Hui4[1], 3, 4)
    Hui4[4] = TuningSub1(Hui4[1], 3, 5)
    Hui4[5] = TuningSub1(Hui4[1], 4, 7)
    Hui4[7] = TuningSub1(Hui4[2], 4, 7)
    Hui4[6] = TuningSub1(Hui4[4], 4, 5)
    Hui4[3] = TuningSub1(Hui4[6], 7, 5)

    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 3, '64/81', Freq)
    const HuiFreq = TuningSub3(Hui, 3, '4/5', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[1] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[1]
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return {
        Zhun, Hui, Hui2, Hui3, Hui4, Xin, ZhunFreq, HuiFreq,
        OneDifZhun: '8/9',
        OneDifHui: '9/10',
        OneDifXin: 0.8908987181403393,
        Name: 'ÈªÉÈêòË™ø„ÄÄÁ∑ä‰∫îÊÖ¢‰∏Ä'
    }
}

const Tuning12 = (Freq = 432, n = 1) => {  // ÁÑ°Â™íË™øÊÖ¢‰∏âÂÖ≠ 1 2 3 5 6 7 2 Êàñ 4 5 6 1 2 3 5
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 1
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[4] = TuningSub1(Zhun[1], 5, 7)
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[2] = TuningSub1(Zhun[7], 7, 4)
    Zhun[5] = TuningSub1(Zhun[2], 5, 7)
    Zhun[3] = TuningSub1(Zhun[5], 5, 4)
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    // ÂæΩÊ≥ïÂæã
    Hui[3] = TuningSub1(Hui[1], 3, 4)
    Hui[4] = TuningSub1(Hui[3], 5, 6)
    Hui[6] = TuningSub1(Hui[4], 6, 7)
    Hui[5] = TuningSub1(Hui[1], 3, 5)
    Hui[2] = TuningSub1(Hui[4], 5, 4)
    Hui[7] = TuningSub1(Hui[2], 4, 7)

    // Èô≥ÊáâÊôÇ
    // Hui[3] = TuningSub1(Hui[1], 4, 5)
    // Hui[5] = TuningSub1(Hui[3], 6, 7)
    // Hui[7] = TuningSub1(Hui[5], 4, 5)
    // Hui[4] = TuningSub1(Hui[1], 5, 7)
    // Hui[6] = TuningSub1(Hui[4], 6, 7)
    // Hui[2] = TuningSub1(Hui[7], 7, 4)
    // Hui[3] = TuningSub1(Hui[5], 5, 4)
    // ÊàëÁöÑ‰∏çÁî®ÊúÄÂæå‰∏ÄÊ≠•
    Hui2[3] = TuningSub1(Hui2[1], 3, 4)
    Hui2[4] = TuningSub1(Hui2[3], 5, 6)
    Hui2[6] = TuningSub1(Hui2[4], 6, 7)
    Hui2[5] = TuningSub1(Hui2[1], 3, 5)
    Hui2[2] = TuningSub1(Hui2[5], 7, 5)
    Hui2[7] = TuningSub1(Hui2[2], 4, 7)

    Hui3[3] = TuningSub1(Hui3[1], 3, 4)
    Hui3[4] = TuningSub1(Hui3[3], 5, 6)
    Hui3[6] = TuningSub1(Hui3[4], 6, 7)
    Hui3[7] = TuningSub1(Hui3[4], 5, 7)
    Hui3[2] = TuningSub1(Hui3[7], 7, 4)
    Hui3[5] = TuningSub1(Hui3[2], 5, 7)

    Hui4[3] = TuningSub1(Hui4[1], 3, 4)
    Hui4[5] = TuningSub1(Hui4[1], 3, 5)
    Hui4[6] = TuningSub1(Hui4[3], 5, 7)
    Hui4[2] = TuningSub1(Hui4[5], 7, 5)
    Hui4[4] = TuningSub1(Hui4[2], 4, 5)
    Hui4[7] = TuningSub1(Hui4[2], 4, 7)

    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    // const ZhunFreq = TuningSub3(Zhun, 2, '2/3', Freq)
    const ZhunFreq = TuningSub3(Zhun, 5, '1', Freq)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[7] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[12] / 2
    Xin[6] = +List12[2]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Hui2, Hui3, Hui4, Xin, ZhunFreq, HuiFreq, Name: 'Êó†Â™íË™ø„ÄÄÊÖ¢‰∏âÂÖ≠' }
}

const Tuning13 = (Freq = 432, n = 4) => {  // ÈñìÂº¶‰∏ÄÊÖ¢‰∏Ä‰∏â 7 2 3 5 6 1 2 Êàñ 3 5 6 1 2 4 5
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 4
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    // Ê∫ñÊ≥ïÂæã
    Zhun[7] = TuningSub1(Zhun[4], 5, 7)
    Zhun[2] = TuningSub1(Zhun[4], 5, 4)
    Zhun[5] = TuningSub1(Zhun[2], 5, 7)
    Zhun[6] = TuningSub1(Zhun[4], 4, 5)
    Zhun[3] = TuningSub1(Zhun[5], 5, 4)
    Zhun[1] = TuningSub1(Zhun[3], 5, 4)
    // ÂæΩÊ≥ïÂæã
    Hui[6] = TuningSub1(Hui[4], 4, 5)
    Hui[2] = TuningSub1(Hui[4], 5, 4)
    Hui[7] = TuningSub1(Hui[2], 4, 7)
    Hui[5] = TuningSub1(Hui[7], 5, 4)
    Hui[3] = TuningSub1(Hui[4], 6, 5)
    Hui[1] = TuningSub1(Hui[3], 5, 4)

    Hui2[6] = TuningSub1(Hui2[4], 4, 5)
    Hui2[5] = TuningSub1(Hui2[6], 6, 5)
    Hui2[2] = TuningSub1(Hui2[4], 5, 4)
    Hui2[7] = TuningSub1(Hui2[2], 4, 7)
    Hui2[3] = TuningSub1(Hui2[4], 6, 5)
    Hui2[1] = TuningSub1(Hui2[3], 5, 4)

    Hui3[6] = TuningSub1(Hui3[4], 4, 5)
    Hui3[2] = TuningSub1(Hui3[4], 5, 4)
    Hui3[7] = TuningSub1(Hui3[2], 4, 7)
    Hui3[5] = TuningSub1(Hui3[7], 5, 4)
    Hui3[3] = TuningSub1(Hui3[5], 5, 4)
    Hui3[1] = TuningSub1(Hui3[2], 6, 5)

    Hui4[6] = TuningSub1(Hui4[4], 4, 5)
    Hui4[5] = TuningSub1(Hui4[6], 6, 5)
    Hui4[7] = TuningSub1(Hui4[5], 4, 5)
    Hui4[2] = TuningSub1(Hui4[7], 7, 4)
    Hui4[3] = TuningSub1(Hui4[4], 6, 5)
    Hui4[1] = TuningSub1(Hui4[3], 5, 4)

    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 4, '8/9', Freq)
    const HuiFreq = TuningSub3(Hui, 4, '9/10', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[2] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[7] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[12] / 2
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return {
        Zhun, Hui, Hui2, Hui3, Hui4, Xin, ZhunFreq, HuiFreq,
        OneDifZhun: '243/256',
        OneDifHui: '243/256',
        OneDifXin: 0.943874312681694,
        Name: 'ÈñìÂº¶‰∏Ä„ÄÄÊÖ¢‰∏Ä‰∏â'
    }
}

const Tuning14 = (Freq = 432, n = 1) => {  // ÈñìÂº¶‰∫åÁ∑ä‰∫îÊÖ¢‰∏â 1 2 3 5 #6 1 2 Êàñ 2 3 b5 6 1 2 3
    let Zhun = [], Hui = [], Hui2 = [], Hui3 = [], Hui4 = [], Xin = []
    const a = 1
    Zhun[a] = '1'
    Hui[a] = '1'
    Hui2[a] = '1'
    Hui3[a] = '1'
    Hui4[a] = '1'
    Zhun[4] = TuningSub1(Zhun[1], 5, 7)
    Zhun[2] = TuningSub1(Zhun[4], 5, 4)
    Zhun[3] = TuningSub1(Zhun[2], 9, 10)
    Zhun[6] = TuningSub1(Zhun[1], 4, 7)
    Zhun[5] = TuningSub1(Zhun[6], 10, 9)
    Zhun[7] = TuningSub1(Zhun[2], 4, 7)
    // ÂæΩÊ≥ïÂæã
    Hui2[3] = TuningSub1(Hui2[1], 6, 7)
    Hui2[4] = TuningSub1(Hui2[1], 5, 7)
    Hui2[5] = TuningSub1(Hui2[4], 5, 6)
    Hui2[2] = TuningSub1(Hui2[3], 10, 9)
    Hui2[7] = TuningSub1(Hui2[2], 4, 7)
    Hui2[6] = TuningSub1(Hui2[1], 4, 7)

    // Èô≥ÊáâÊôÇÊ≥ï
    // Hui3[3] = TuningSub1(Hui3[1], 4, 5)
    // Hui3[5] = TuningSub1(Hui3[3], 4, 5)
    // Hui3[7] = TuningSub1(Hui3[5], 3, 4)
    // Hui3[4] = TuningSub1(Hui3[1], 5, 7)
    // Hui3[6] = TuningSub1(Hui3[3], 5, 7)
    // Hui3[2] = TuningSub1(Hui3[7], 7, 4)
    // Hui3[3] = TuningSub1(Hui3[1], 3, 4)
    // Êàë
    Hui3[3] = TuningSub1(Hui3[1], 6, 7)
    Hui3[4] = TuningSub1(Hui3[1], 5, 7)
    Hui3[5] = TuningSub1(Hui3[4], 5, 6)
    Hui3[7] = TuningSub1(Hui3[5], 6, 7)
    Hui3[2] = TuningSub1(Hui3[7], 7, 4)
    Hui3[6] = TuningSub1(Hui3[1], 4, 7)

    Hui4[3] = TuningSub1(Hui4[1], 6, 7)
    Hui4[2] = TuningSub1(Hui4[3], 10, 9)
    Hui4[7] = TuningSub1(Hui4[2], 4, 7)
    Hui4[6] = TuningSub1(Hui4[1], 4, 7)
    Hui4[4] = TuningSub1(Hui4[2], 4, 5)
    Hui4[5] = TuningSub1(Hui4[6], 9, 8)

    Zhun = TuningSub2(Zhun, a, n)
    // Hui = TuningSub2(Hui, a, n)
    Hui2 = TuningSub2(Hui2, a, n)
    Hui3 = TuningSub2(Hui3, a, n)
    Hui4 = TuningSub2(Hui4, a, n)
    const ZhunFreq = TuningSub3(Zhun, 2, '2/3', Freq)
    // const HuiFreq = TuningSub3(Hui, 2, '2/3', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[7] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[1]
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return {
        Zhun, Hui2, Hui3, Hui4, Xin, ZhunFreq,
        //  HuiFreq,
        Name: 'ÈñìÂº¶‰∫å„ÄÄÁ∑ä‰∫îÊÖ¢‰∏â'
    }
}

const Tuning15 = (Freq = 432, n = 3) => { // ÂæΩÊ≥ïÂæãÂπ≥Ë™øÊÖ¢‰∫î‰∏É 5 b6 1 2 b3 5 b6 Êàñ 3 4 5 7 1 3 4
    let Hui = [], Xin = []
    const a = 3
    Hui[a] = '1'
    // ÂæΩÊ≥ïÂæã
    Hui[5] = TuningSub1(Hui[3], 5, 6)
    Hui[7] = TuningSub1(Hui[3], 4, 6)
    Hui[1] = TuningSub1(Hui[3], 5, 4)
    Hui[4] = TuningSub1(Hui[1], 5, 7)
    Hui[6] = TuningSub1(Hui[3], 5, 7)
    Hui[2] = TuningSub1(Hui[7], 7, 4)
    Hui = TuningSub2(Hui, a, n)
    const HuiFreq = TuningSub3(Hui, 3, '4/5', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[4] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[11] / 2
    Xin[6] = +List12[3]
    Xin[7] = +List12[4]
    return { Hui, Xin, HuiFreq, Name: 'Êó•ÂÇ≥Âπ≥Ë™ø„ÄÄÊÖ¢‰∫î‰∏É' }
}

const Tuning16 = (Freq = 432, n = 2) => {  // ÂæΩÊ≥ïÂæãÂÅ¥ÂïÜË™øÊÖ¢‰∏âÂõõÂÖ≠ #6 1 2 3 5 6 1 Êàñ 1 2 3 b5 6 b1 2
    let Hui = [], Xin = []
    const a = 2
    Hui[a] = '1'
    // ÂæΩÊ≥ïÂæã
    Hui[4] = TuningSub1(Hui[2], 6, 7)
    Hui[6] = TuningSub1(Hui[4], 4, 5)
    Hui[5] = TuningSub1(Hui[2], 5, 7)
    Hui[7] = TuningSub1(Hui[2], 4, 7)
    Hui[3] = TuningSub1(Hui[5], 5, 4)
    Hui[1] = TuningSub1(Hui[5], 5, 3)
    Hui = TuningSub2(Hui, a, n)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[7] / 2
    Xin[4] = +List12[9] / 2
    Xin[5] = +List12[12] / 2
    Xin[6] = +List12[2]
    Xin[7] = +List12[5]
    return { Hui, Xin, HuiFreq, Name: 'ÂÅ¥ÂïÜË™ø„ÄÄÊÖ¢‰∏âÂõõÂÖ≠' }
}

const Tuning17 = (Freq = 432, n = 1) => {  // ÂæΩÊ≥ïÂæãÂÅ¥ÁæΩË™øÁ∑ä‰∏É
    let Hui = [], Xin = []
    const a = 1
    Hui[a] = '1'
    // ÂæΩÊ≥ïÂæã
    Hui[6] = TuningSub1(Hui[1], 4, 7)
    Hui[5] = TuningSub1(Hui[6], 6, 5)
    Hui[4] = TuningSub1(Hui[6], 5, 4)
    Hui[3] = TuningSub1(Hui[6], 7, 5)
    Hui[2] = TuningSub1(Hui[3], 6, 5)
    Hui[7] = TuningSub1(Hui[6], 5, 6)
    Hui = TuningSub2(Hui, a, n)
    const HuiFreq = TuningSub3(Hui, 5, '1', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[5] / 2
    Xin[3] = +List12[7] / 2
    Xin[4] = +List12[9] / 2
    Xin[5] = +List12[12] / 2
    Xin[6] = +List12[2]
    Xin[7] = +List12[5]
    return { Hui, Xin, HuiFreq, Name: 'ÂÅ¥ÁæΩË™ø„ÄÄÁ∑ä‰∏É' }
}

const Tuning18 = (Freq = 432, n = 5) => {  // ÂæΩÊ≥ïÂÅ¥ËúÄË™øÁ∑ä‰∫åÊÖ¢‰∫î 5 #6 1 2 b3 5 6
    let Zhun = [], Hui = [], Xin = []
    const a = 3
    Zhun[a] = '1'
    Hui[a] = '1'
    // ÊåâÈü≥Ë™øÂº¶
    Zhun[6] = TuningSub1(Zhun[3], 5, 7)
    Zhun[1] = TuningSub1(Zhun[3], 5, 4)
    Zhun[4] = TuningSub1(Zhun[6], 16, 10)
    Zhun[2] = TuningSub1(Zhun[4], 16, '10 65/81')
    Zhun[5] = TuningSub1(Zhun[2], '9 8/9', 16) // '9 8/9'‰∫îÊòØÁ¥îÂæãÔºå‰∏ÉÊòØ‰∫îÂ∫¶Âæã„ÄÇÂ¶ÇÊûúÊòØ10Ôºå‰∫îÊòØ‰∫îÂ∫¶ÂæãÔºå‰∏ÉÊòØÁ¥îÂæã„ÄÇ
    Zhun[7] = TuningSub1(Zhun[5], '9 8/15', 16)
    // ÂæΩ
    Hui[6] = TuningSub1(Hui[3], 5, 7)
    Hui[1] = TuningSub1(Hui[3], 5, 4)
    Hui[2] = TuningSub1(Hui[1], 5, 6)
    Hui[7] = TuningSub1(Hui[3], 3, 5)
    Hui[4] = TuningSub1(Hui[7], 7, 5)
    Hui[5] = TuningSub1(Hui[6], 4, 3)
    Zhun = TuningSub2(Zhun, a, n)
    Hui = TuningSub2(Hui, a, n)
    const ZhunFreq = TuningSub3(Zhun, 3, '4/5', Freq)
    const HuiFreq = TuningSub3(Hui, 3, '4/5', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[3] / 2
    Xin[2] = +List12[6] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[11] / 2
    Xin[6] = +List12[3]
    Xin[7] = +List12[5]
    return { Zhun, Hui, Xin, ZhunFreq, HuiFreq, Name: 'ÂÅ¥ËúÄË™ø„ÄÄÁ∑ä‰∫åÊÖ¢‰∫î' }
}

const Tuning19 = (Freq = 432, n = 1) => {  // ÂæΩÊ≥ïÂæãÂÅ¥Ê•öË™øÊÖ¢‰∏Ä‰∫åÁ∑ä‰∫î‰∏É
    let Hui = [], Xin = []
    const a = 1
    Hui[a] = '1'
    // ÂæΩÊ≥ïÂæã
    Hui[2] = TuningSub1(Hui[1], 5, 6)
    Hui[3] = TuningSub1(Hui[2], 6, 7)
    Hui[5] = TuningSub1(Hui[1], 4, 7)
    Hui[7] = TuningSub1(Hui[5], 4, 5)
    Hui[6] = TuningSub1(Hui[7], 6, 5)
    Hui[4] = TuningSub1(Hui[5], 6, 5)
    Hui = TuningSub2(Hui, a, n)
    const HuiFreq = TuningSub3(Hui, 3, '4/5', Freq)
    // Êñ∞Ê≥ïÂØÜÁéá
    const List12 = EqualTemp(Freq).List1
    Xin[1] = +List12[1] / 2
    Xin[2] = +List12[4] / 2
    Xin[3] = +List12[8] / 2
    Xin[4] = +List12[10] / 2
    Xin[5] = +List12[1]
    Xin[6] = +List12[3]
    Xin[7] = +List12[6]
    return {
        Hui, Xin, HuiFreq,
        OneDifHui: '9/10',
        OneDifXin: 0.890898718140339,
        Name: 'ÂÅ¥Ê•öË™ø„ÄÄÊÖ¢‰∏Ä‰∫åÁ∑ä‰∫î‰∏É'
    }
}

const NumList = '„Äá‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠‰∏ÉÂÖ´‰πù'

export const Tuning = (TuningMode, Freq = 432, n = 0) => {
    const { Zhun, Hui, Xin, Hui2, Hui3, Hui4, ZhunFreq, HuiFreq, OneDifZhun, OneDifHui, Name } = eval('Tuning' + TuningMode)(Freq, +n)
    const DifZhun = [], NameZhun = [], DifHui = [], NameHui = [], NameHui2 = [], NameHui3 = [], NameHui4 = [], PitchZhun = [], PitchHui = []
    if (Zhun) {
        for (let i = 1; i <= 6; i++) {
            DifZhun[i] = OctaveCent(Zhun[i + 1], Zhun[i]).Cent.toFixed(1)
        }
        for (let i = 1; i <= 7; i++) {
            NameZhun[i] = Portion2Name(Zhun[i], 2)
            PitchZhun[i] = Portion2Pitch(Zhun[i], Zhun[1], OneDifZhun || 1)
        }
    }
    if (Hui) {
        for (let i = 1; i <= 6; i++) {
            DifHui[i] = OctaveCent(Hui[i + 1], Hui[i]).Cent.toFixed(1)
        }
        for (let i = 1; i <= 7; i++) {
            NameHui[i] = Portion2Name(Hui[i], 2)
            PitchHui[i] = Portion2Pitch(Hui[i], Hui[1], OneDifHui || 1)
        }
    }
    if (Hui2) {
        for (let i = 1; i <= 7; i++) {
            NameHui2[i] = Portion2Name(Hui2[i], 2)
        }
    }
    if (Hui3) {
        for (let i = 1; i <= 7; i++) {
            NameHui3[i] = Portion2Name(Hui3[i], 2)
        }
    }
    if (Hui4) {
        for (let i = 1; i <= 7; i++) {
            NameHui4[i] = Portion2Name(Hui4[i], 2)
        }
    }
    let Print = []
    for (let i = 1; i <= 7; i++) {
        const Tmp = Zhun ? [Zhun[i], PitchZhun[i], NameZhun[i], +(ZhunFreq[i].toFixed(4)), DifZhun[i - 1]] : ['', '', '', '', '']
        const Tmp1 = Hui ? [Hui[i], PitchHui[i], NameHui[i], +(HuiFreq[i].toFixed(4)), DifHui[i - 1]] : ['', '', '', '', '']
        const Tmp2 = Hui2 ? [Hui2[i], NameHui2[i]] : ['', '']
        const Tmp3 = Hui3 ? [Hui3[i], NameHui3[i]] : ['', '']
        const Tmp4 = Hui4 ? [Hui4[i], NameHui4[i]] : ['', '']
        Print = Print.concat({
            title: NumList[i],
            data: [...Tmp, ...Tmp1, ...Tmp2, ...Tmp3, ...Tmp4, Xin[i]]
        })

    }
    return { Name, Print }
}
// console.log(Tuning(9))

export const FretPitch = (TuningMode, TempMode, n) => { // ÂæΩ‰ΩçÈü≥„ÄÇÂº¶Ê≥ï„ÄÅÂæãÂà∂„ÄÅÂÆÆÂº¶
    let { Zhun, Hui, Hui2, Hui3, Hui4, OneDifHui, OneDifZhun } = eval('Tuning' + TuningMode)(432, +n)
    let Print = [], NameList = [], NameBList = [], StringList = []
    let OneDif = ''
    TempMode = +TempMode
    if (TempMode === 1) {
        StringList = Hui
        OneDif = OneDifHui
    } else if (TempMode === 2) {
        StringList = Hui2
        OneDif = OneDifHui
    } else if (TempMode === 3) {
        StringList = Hui3
        OneDif = OneDifHui
    } else if (TempMode === 4) {
        StringList = Hui4
        OneDif = OneDifHui
    } else if (TempMode === 5) {
        StringList = Zhun
        OneDif = OneDifZhun
    }
    if (StringList === undefined) {
        return 'ÁÑ°Ê≠§ÂæãÂà∂'
    }
    for (let i = 1; i <= 7; i++) { // ‰∏ÉÂº¶
        let Pitch = [], NameTmp = [], NameBTmp = []
        for (let k = 0; k <= 16; k++) { // 15ÂæΩ 
            Pitch[k] = frc(StringList[i]).div(Fret2Leng(k)).toFraction(false) // ÈÄôÂÄãÊòØÊ†∏ÂøÉÔºåÂÖ∂‰ªñÈÉΩÊòØÈôÑÂ∏∂
            NameTmp[k] = Portion2Name(Pitch[k], 2) // PitchÊòØÈ†ªÁéáÊØîÂàÜÊï∏ Áü•ÈÅìÈ†ªÁéáÊØîÔºåÂú®Â∞çË±°‰∏≠ÊâæÂà∞Â∞çÊáâÁöÑÈü≥ÂêçÂî±Âêç  
            NameBTmp[k] = Portion2Pitch(Pitch[k], StringList[1], OneDif || 1)
            Pitch[k] += `</br>`
            Pitch[k] += NameTmp[k] ? NameTmp[k] + ' ' : ''
            Pitch[k] += NameBTmp[k] || ''
        }
        NameList = NameList.concat(NameTmp)
        NameBList = NameBList.concat(NameBTmp) // Âè≥ÈÇäÈÄôÂÄãÊØèÂÄãÂæ™Áí∞Ê∏ÖÁ©∫
        Pitch = Pitch.reverse()
        Print = Print.concat({
            title: NumList[i],
            data: Pitch
        })
    }
    NameList = Unique(NameList)
    NameBList = Unique(NameBList)
    const NamePrint = [{
        data: NameBList
    }, {
        data: NameList
    }]
    return { Print, NamePrint }
}

export const BetweenFret = (TuningMode, TempMode, n, isSimple) => {
    isSimple = +isSimple
    let { Zhun, Hui, Hui2, Hui3, Hui4, Xin, OneDifHui, OneDifZhun, OneDifXin } = eval('Tuning' + TuningMode)(432, +n)
    let Print = [], StringList = [], FushionList = [], Fret = []
    let OneDif = ''
    TempMode = +TempMode
    if (TempMode === 1) {
        StringList = Hui
        FushionList = isSimple ? FushionList1S : FushionList1
        OneDif = OneDifHui
    } else if (TempMode === 2) {
        StringList = Hui2
        FushionList = isSimple ? FushionList2S : FushionList2
        OneDif = OneDifHui
    } else if (TempMode === 3) {
        StringList = Hui3
        FushionList = isSimple ? FushionList3S : FushionList3
        OneDif = OneDifHui
    } else if (TempMode === 4) {
        StringList = Hui4
        FushionList = isSimple ? FushionList4S : FushionList4
        OneDif = OneDifHui
    } else if (TempMode === 5) {
        StringList = Zhun
        FushionList = isSimple ? FushionList5S : FushionList5
        OneDif = OneDifZhun
    }
    //  else if (TempMode === 6) {
    //     StringList = Xin
    //     FushionList = isSimple ? FushionList6S : FushionList6
    //     OneDif = OneDifXin
    // }
    let Length = []
    for (let i = 1; i <= 7; i++) {
        for (let m = 0; m <= 2; m++) {
            for (let k = FushionList.length * m; k < FushionList.length * (m + 1); k++) {
                let tmp = frc(StringList[i]).div(FushionList[k - FushionList.length * m])
                while (Number(tmp) >= (1 / 2) ** m) {
                    tmp = tmp.div(2)
                }
                while (Number(tmp) < (1 / 2) ** (m + 1)) {
                    tmp = tmp.mul(2)
                }
                Length = Length.concat(tmp.toFraction(false))
            }
        }
    }
    Length = Unique(Length)
    Length.sort((a, b) => Leng2Fret(b) - Leng2Fret(a))
    for (let l = 0; l < Length.length; l++) { // ÂéªÊéâ2.5ÂæΩ‰ª•‰∏äÁöÑ
        if (Leng2Fret(Length[l]) < 2.5) {
            Length = Length.splice(0, l)
        }
    }
    for (let l = 0; l < Length.length; l++) {
        Fret[l] = Leng2Fret(Length[l])
    }
    Print = Print.concat({
        title: 'ÂæΩ',
        data: Fret
    })
    for (let i = 1; i <= 7; i++) {
        let String = []
        for (let j = 0; j < Length.length; j++) {
            let tmp1 = frc(StringList[i]).div(Length[j])
            while (Number(tmp1) > 2) {
                tmp1 = tmp1.div(2)
            }
            while (Number(tmp1) < 1) {
                tmp1 = tmp1.mul(2)
            }
            if (FushionList.indexOf(tmp1.toFraction(false)) > -1) {
                String[j] = Portion2Name(tmp1, 2)
                String[j] = String[j] + ' ' + Portion2Pitch(tmp1, StringList[1], OneDif || 1)
            } else {
                String[j] = ' '
            }
        }
        Print = Print.concat({
            title: NumList[i],
            data: String
        })
    }
    return Print
}
// console.log(BetweenFret(1, 6, 0))
// console.log(FretPitch(1, 5, 0))
// while (Number(ZhunPitch[k]) >= 2) {
//     ZhunPitch[k] = ZhunPitch[k].div(2)
// }
// const faas = z => { // ÊääÂàÜÊï∏ËôïÁêÜÊàêÈü≥ÂàÜ
//     const b = []
//     for (let i = 0; i < PythagoreanListC.length; i++) {
//         const a = PythagoreanListC[i].split('/')[0] / PythagoreanListC[i].split('/')[1]
//         b[i] = (Math.log2(a) * 1200).toFixed(2)
//     }
//     return b
// }
// console.log(faas(1))

// const fa3 = z => {
//     const a = 1.276584120678397
//     return frc(a).toFraction(false)
// }
// console.log(fa3(3))
// sÊï£Èü≥ÔºåfÊ≥õÈü≥ÔºåaÊåâÈü≥
export const Position2Pitch = (Input, TuningMode, TempMode, GongString, ZhiString, BaseFreq, OutputMode, isStrict) => { // ÔºõÂìÅÂº¶Ê≥ïÔºõÂæãÂà∂ÔºõÊòØÂê¶ÊòØÊ∑∑ÂêàÂæãÂà∂ÔºõÂÆÆÂº¶ÔºõÂæµÂº¶ÔºàÂÆÆÂº¶ÂæµÂº¶Âè™ËÉΩ‰∫åÈÅ∏‰∏ÄÔºåÂè¶‰∏ÄÂÄãÁà≤0ÔºâÔºõÂÆÆÂº¶È†ªÁéáÔºõËº∏Âá∫Ê®°Âºè 1 Âî±Âêç 2Èü≥Âêç 3 ËàáÂÆÆÂº¶È†ªÁéáÊØî 4 È†ªÁéáÔºõ
    TempMode = +TempMode
    TuningMode = +TuningMode
    OutputMode = +OutputMode
    BaseFreq = +BaseFreq
    isStrict = +isStrict
    GongString = +GongString
    ZhiString = +ZhiString
    const { Zhun, Hui, Hui2, Hui3, Hui4, OneDifZhun, OneDifHui } = eval('Tuning' + TuningMode)(BaseFreq, GongString)
    let StringList = [], OneDif = ''
    if (TempMode === 1) {
        StringList = Hui
        OneDif = OneDifHui
    } else if (TempMode === 2) {
        StringList = Hui2
        OneDif = OneDifHui
    } else if (TempMode === 3) {
        StringList = Hui3
        OneDif = OneDifHui
    } else if (TempMode === 4) {
        StringList = Hui4
        OneDif = OneDifHui
    } else if (TempMode === 5) {
        StringList = Zhun
        OneDif = OneDifZhun
    }
    const TheString = ZhiString || GongString
    const isZhi = ZhiString ? true : false
    Input = Input.replace(/\[(.+?)\]/g, function () { // @lzfcc [Ê≥õÈü≥]
        return arguments[1].split(';').map(x => 'f,' + x).join(';')
    })
    Input = Input.split(';').filter(Boolean)
    // for (let i = 0; i < Input.length; i++) {
    //     if (Input[i] === 'dayuan') {
    //         Input.splice(i, i, Input[i - 2], Input[i - 1], Input[i - 2], Input[i - 1])
    //     } else if (Input[i] === 'suo3') {
    //         Input.splice(i, i, Input[i - 1], Input[i - 1])
    //     } else if (Input[i] === 'suo7') {
    //         Input.splice(i, i, Input[i - 1], Input[i - 1], Input[i - 1], Input[i - 1], Input[i - 1], Input[i - 1])
    //     } else if (Input[i] === 'suo9') {
    //         Input.splice(i, i, Input[i - 1], Input[i - 1], Input[i - 1], Input[i - 1], Input[i - 1], Input[i - 1], Input[i - 1], Input[i - 1])
    //     } else if (Input[i] === 'fenkai') {
    //         Input.splice(i, i, 'shang', 'xia')
    //     }
    // }
    const Type = [], String = [], Fret = [], Scale = [], Cent = [], Pitch = [], PitchPrint = []
    for (let i = 0; i < Input.length; i++) {
        let Pre = Input[i].split(',').filter(Boolean)
        // ‰∏ãÈù¢ÊòØË£úÂÖ®ÊâøÂâçÁúÅÁï•
        if (Pre.length === 1) {
            if (isNaN(Pre[0]) === false) {
                // „ÄåÂ∞±„ÄçÔºåËàá‰∏ä‰∏ÄÈü≥ÂæΩ‰ΩçÂêåÔºåÊàñÂêåÁà≤Êï£Èü≥            
                if (Type[i - 1] === 'f') { // f,7,6;3                    
                    Pre = [Type[i - 1], Fret[i - 1], Pre[0]]
                } else if (Type[i - 1] === 'l') {  // l,13;2 
                    Pre = [Fret[i - 1], Pre[0]]
                } else { // Êï£„ÄÅÊåâÈü≥                    
                    Pre = [Type[i - 1], Pre[0]]
                }
            }
        } else if (Pre.length === 2 && Pre[0] === 'f') { // f,7,3;f,3
            Pre = [Type[i - 1], Fret[i - 1], Pre[1]]
        }
        // ‰∏ãÈù¢ÊòØÊ≠£ÂºèËôïÁêÜ
        Type[i] = Pre[0]
        let floor = 0
        if (Type[i] === 's') {
            String[i] = +Pre[1]
            Scale[i] = StringList[String[i]]
        } else if (Type[i] === 'zh') {
            String[i] = String[i - 1]
            Scale[i] = Scale[i - 1].mul(TempMode === 1 ? '9/8' : '10/9')
        } else if (Type[i] === 'shang') {
            String[i] = String[i - 1]
            Scale[i] = Scale[i - 1].mul(TempMode === 1 ? '9/8' : '10/9')
        } else if (Type[i] === 'xia') {
            String[i] = String[i - 1]
            Scale[i] = Scale[i - 1].div(TempMode === 1 ? '9/8' : '10/9')
        } else if (Type[i] === 'qi' && Pre.length === 1) {
            String[i] = String[i - 1]
            Scale[i] = StringList[String[i]]
        } else {
            if (Type[i] === 'f') {
                Fret[i] = 7 - Math.abs(7 - +Pre[1]) // Ê≥õÈü≥‰ª•7ÂæΩÂ∞çÁ®±
                String[i] = +Pre[2]
            } else if (Type[i] === 'l' || (Type[i] === 'qi' && Pre.length === 2)) {
                Fret[i] = Pre[1]
                String[i] = +String[i - 1]
            } else if (Type[i] === 'yin' || Type[i] === 'nao') {
                Fret[i] = Fret[i - 1]
                String[i] = String[i - 1]
            } else {
                Fret[i] = Type[i]
                String[i] = +Pre[1]
            }
            const Leng = Fret2Leng(Fret[i])
            Scale[i] = frc(1).div(Leng).mul(StringList[String[i]])
        }
        Cent[i] = Math.log2(Number(frc(Scale[i]))) * 1200 - (isZhi ? 498.045 : 0) // Ëã•Áî®ÂæµÂº¶‰ΩúÁÇ∫Âü∫Ê∫ñÔºåÊ∏õÁ¥î‰∫îÂ∫¶
        floor = Math.floor(Cent[i] / 1200) // Ë∂ÖÂá∫‰∏ÄÂÄãÂÖ´Â∫¶
        Cent[i] = (Cent[i] % 1200 + 1200) % 1200
        // ‰∏ãÈù¢ÊòØËôïÁêÜÊ®°Á≥äÂæΩ‰Ωç
        for (const [key, value] of Object.entries(FushionList)) {
            const threshold = isStrict ? 0.95 : 10
            if (Cent[i] > +key - threshold && Cent[i] < +key + threshold && value[0] !== 3) {
                Pitch[i] = value[OutputMode === 2 ? OutputMode : 3]
                break
            }
        }
        if (!isStrict && !Pitch[i]) { // ÈÄôÂÄãÁî®‰æÜÂ∞ç‰ªòÂæΩ‰ΩçÊõ¥‰∏çÊ∫ñÁöÑ
            for (const [key, value] of Object.entries(FushionList)) { // 21.5ÊôÆÈÄöÈü≥Â∑Æ
                if (Cent[i] > +key - 21.5 && Cent[i] < +key + 21.5 && value[0] !== 3) {
                    Pitch[i] = value[OutputMode === 2 ? OutputMode : 3]
                    break
                }
            }
        }
        if (OutputMode === 1) {
            Pitch[i] = Portion2Pitch(Pitch[i], StringList[1], OneDif || 1)
        } else if (OutputMode === 3) {
            if (Pitch[i] === undefined) {
                Pitch[i] = frc(2 ** (Cent[i] / 1200)).toFraction(false)
            }
            Pitch[i] = frc(Pitch[i]).mul(2 ** floor).toFraction(false)
        }
        PitchPrint[i] = Pitch[i]
        if (OutputMode <= 2) {
            if (floor === 3) {
                PitchPrint[i] = '¬∑¬∑' + PitchPrint[i]
            } else if (floor === 2) {
                PitchPrint[i] = '¬∑' + PitchPrint[i]
            } else if (floor === 0) {
                PitchPrint[i] += '¬∑'
            } else if (floor === -1) {
                PitchPrint[i] += '¬∑¬∑'
            }
        }
        if (Type[i] === 'zh') {
            if (i > 0) {
                PitchPrint[i] = '^' + PitchPrint[i] + Pitch[i - 1]
            }
        } else if (Type[i] === 'f') {
            PitchPrint[i] = '‡ßπ' + PitchPrint[i]
        } else if (Type[i] === 'l') {
            PitchPrint[i] = '‚ó†' + PitchPrint[i]
        }
    }
    return PitchPrint.join('„ÄÄ')
}
// console.log(Position2Pitch('8.4,7;s,5;s,1', '1', '1', '4', '0', '347.654321', '3'))
// console.log(Position2Pitch('s,1;9.9,2;s,1;9.9,2;l,14;s,2;1;2;2;1;2;14,2;3;3;2;3;s,5;4;10,2;s,4;8,2;s,5;11,1;9,1;2;1;2;8,2;l,7.6;s,2;1;10,4', '1', '2', '1', '347.654321', '2'))
// console.log(Position2Pitch('s,5', '1', '1', '3', '0', '347.654321', '2', '0'))
// console.log(test('2,1;[3;5,4;2];2;4;[9,5];3,4;6'))


const Portion2Interval = (portion, one = 1, oneDif = 1) => {
    const base = frc(one).div(oneDif)
    let a = frc(portion).div(base)
    while (Number(a) < 1) {
        a = a.mul(2)
    }
    while (Number(a) > 2) {
        a = a.div(2)
    }
    const got = FushionListB.find(obj => obj.freq === a.toFraction(false))
    return got
}

export const FretPitch1 = (TuningMode, n) => { // ÂæΩ‰ΩçÈü≥„ÄÇÂº¶Ê≥ï„ÄÅÂÆÆÂº¶
    let { Zhun, Hui, OneDifHui, OneDifZhun } = eval('Tuning' + TuningMode)(432, +n)
    let ZhunPrint = [], HuiPrint = [], ZhunNameList = [], ZhunNameBList = [], HuiNameList = [], HuiNameBList = []
    const set1 = new Set() // Áî®‰∫éÂéªÈáç
    const set2 = new Set()
    for (let i = 1; i <= 7; i++) { // ‰∏ÉÂº¶
        let ZhunPitch = [], HuiPitch = [], HuiNameTmp = [], ZhunNameTmp = [], HuiNameBTmp = [], ZhunNameBTmp = []
        if (Zhun) {
            for (let k = 16; k >= 0; k--) { // 15ÂæΩ 16=Êï£
                // Zhun Ê∫ñÊ≥ïÂæã‰∏ÉÂº¶Êï£Èü≥È†ªÁéáÊØî    
                ZhunPitch[k] = frc(Zhun[i]).div(Fret2Leng(k)).toFraction(false)
                const tmp = Portion2Interval(ZhunPitch[k])
                const tmp1 = Portion2Interval(ZhunPitch[k], Zhun[1], OneDifZhun || 1)
                if (tmp && !set1.has(tmp.freq)) {
                    ZhunNameTmp[k] = tmp
                    set1.add(tmp.freq)
                }
                if (tmp && !set2.has(tmp.freq)) {
                    ZhunNameBTmp[k] = tmp1
                    set2.add(tmp.freq)
                }
                ZhunPitch[k] += `</br>`
                ZhunPitch[k] += ZhunNameTmp[k] ? ZhunNameTmp[k].nameString(2) + ' ' : ''
                ZhunPitch[k] += ZhunNameBTmp[k] ? ZhunNameBTmp[k].nameString(1) : ''
            }
            ZhunNameList = ZhunNameList.concat(ZhunNameTmp.filter(Boolean))
            ZhunNameBList = ZhunNameBList.concat(ZhunNameBTmp.filter(Boolean))
            ZhunPrint = ZhunPrint.concat({
                title: NumList[i],
                data: ZhunPitch
            })
        }
    }
    // ÊéíÂ∫è
    ZhunNameList.sort((obj1, obj2) => obj1.cent - obj2.cent)
    ZhunNameBList.sort((obj1, obj2) => obj1.cent - obj2.cent)
    const data = {
        ZhunPrint,
        ZhunNameBList: ZhunNameList.map(obj => obj.nameString(2)),
        ZhunNameList: ZhunNameList.map(obj => obj.nameString(1))
    }
    return data
}
// console.log(FretPitch1(1, 0))
