### 大衍求一術

解一次同餘式的核心模塊，孫子定理、不定方程、調日法、演紀都需要求一術。輸入兩個互質整數<n>衍數、定母</n>，求方程 <code>a * x ≡ 1 (mod b)</code> 的解 x

### 大衍總數術

同餘式組　秦九韶推廣之孫子定理。 求解多組 x ≡ r<sub>i</sub> (mod m<sub>i</sub>) ，有解的充要條件是 gcd (m<sub>i</sub>, m<sub>i+1</sub>) | abs (r<sub>i</sub> - r <sub>i+1</sub>)；在孫子定理中，模數需兩兩互質，而秦九韶將不互質的元數變爲互質的定母，進而可以使用孫子定理求解。依次輸入各組餘數 r、元數 m；分隔符：<code>; , ， 。 ； 空格</code>；組數不限

孫子定理有解的充要條件：(m<sub>1</sub>,m<sub>2</sub> | |r<sub>1</sub>-r<sub>2</sub>|)  1、定母i|元數i，2、定母互質，3、M=定母相乘=元數的最小公倍數

### 連分數

給定一個分數，求其連分數、各漸進連分數。非常適合與調日法參照

### 調日法

一個朔望月是 29.5305 日有餘，在<v>授時</v>以前都用分數來表示朔分。自何承天始，以 彊子26 / 彊母47 爲彊率，以 弱子9 / 弱母17 爲弱率，則 朔餘 / 日法 可表示爲 (26m+9n) / (49m+17n) ，m 卽陽率<n>彊數</n>，n 卽陰率<n>弱數</n>，彊弱率之間的任何數都可以作如上表示。調日法是南系、隋系、唐系、宋系的不傳之祕，直到乾嘉時期李銳纔闡明此法<n>更多見 劉鈍 <v>李銳、顧觀光調日法工作述評</v>，<v>自然科學史研究</v>1987(2)；陳久金<v>調日法研究</v>1984(3)；李繼閩<v>關於調日法的數學原理</v>，西北大學學報 1985(2)；[赫赫金鑰](https://kqh.me/tutorial/calendar4)</n>。

無窮調日法是我自己的一點點小改進。彊弱率需滿足如下條件：<img src="https://pic.imgdb.cn/item/604db4765aedab222ce451f5.png" alt="" width='140'></img>，卽 `彊子 * 弱母 - 彊母 * 弱子 = 1` 。那麼推廣開來，26/47 和 9/17 只是一種可能性而已，適合求朔分 0.5305 附近的數，而任何滿足這個條件的彊弱二率，都可以用來調制。只需要輸入分母<n>卽曆法中的日法</n>、彊率，便會自動根據大衍求一術求出弱率，再根據李銳公式求出分子<n>卽曆法中的朔餘</n>和彊弱數<n>卽加權</n> ；也可以同時輸入分子和分母，根據累彊弱之數、李銳、顧觀光-陳久金三種方法各自生成彊弱數。這推廣開來的調日法就是無窮調日法。輸入框中默認是何承天彊率。不過李銳公式有一個限制，必須滿足 弱數<彊母，例如玄始曆 47251 / 89052 ，李銳公式解得 47252 = 26×1816 + 9×4，累強弱、顧-陳公式解得 47251 = 26×1799 + 9×53，卽 47251 / 89052 和 47252 / 89052 都滿足調日法，但李銳公式求不出前者。

更多說明見 [赫赫金鑰](https://kqh.me/tutorial/calendar4)。

### 一次同餘式　二元一次不定方程

ax - by = c 等價於 ax ≡ c (mod b)，有解的充要條件：(a,b)|c，卽 c 能被 a、b的最大公因數整除

### 最大公因數　最小公倍數

求多個整數或小數的最大公因數 gcd、最小公倍數 lcm

### 分數最小公倍數

求多組分數的最小公倍數 lcm，依次輸入各組分子、分母<n>整數分母用 1 表示。</n>

### 章蔀紀元法

依次輸入斗分、歲實分母、朔餘、日法

### 古曆入元

依次輸入年月參數、冬至大小餘、天正經朔大小餘，大餘卽干支序數，無須 - 1

### 唐宋演紀

依次輸入斗分、日法、冬至大小餘、天正經朔大小餘，大餘卽干支序數，無須 - 1

### 造唐宋曆

第一步。 暴力窮舉所有符合條件的日法

第二步。  暴力窮舉所有符合條件的上元積年。選取一部已知曆法作爲參照，「年」輸入參照曆法化爲小數後的歲實；「月」輸入上一步生成的日法、朔餘<n>（選擇最接近的一箇卽可）</n>；「冬至」輸入參照曆法年前冬至的日分<n>（如乙丑日 0.2518 分，則是 1.2518）</n>；「天正朔」輸入參照曆法年前天正經朔的日分。按照經驗，範圍在 0.02 之內。如計算出多個上元，則縮小範圍繼續計算。如選擇了 1256 年作爲參照，計算出 73147137，則上元爲公元 1256-73147137 年。

第三步、窮舉參數。 計算恆星年、近點月、交點月等參數。