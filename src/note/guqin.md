## 琴律計算器

不好意思臨時借用一下曆法的網站，開一個琴律計算器。

`八度値 = log2(頻率比)`，`音分 = 1200 * 八度値`

三分損益律：向上是 *3/2，向下是 *2/3。A 是歸算在 1—2 個八度之間，B 是歸算在 0.5—1 個八度之間。

純律的 `+ - ` 表示多或少一個普通音差 22 音分。

### 減字譜轉唱名

- s 散音，f 泛音，l 連音（上滑下滑），zhuang 撞
- 【格式】類型,徽位,弦;
- 【備註】s 不需要徽位，l 不需要弦，zhuang 不需要徽位、弦
- 【調弦法】見上「調弦法」部分
- 【律制】1 準法律，2 徽法律。明清以來一般都是準法律
- 【宮弦】以幾弦爲宮音。正調以三弦爲宮
- 【宮弦頻率】現在標準是正調五弦 440hz，假設三弦爲宮，用「調弦法」算得準法律三弦是 64/81，三弦頻率就是 440 * 64/81 = 347.654321hz
- 【輸出模式】1 唱名；2 與宮弦的頻率比；3 頻率（以 hz 爲單位）
- 【顯示結果】৹ 泛音；◠ 連音；^ 撞；· 在左表示高一個八度，· 在右表示低一個八度

示例是査阜西《洞庭》第一句。

<img src="https://pic.imgdb.cn/item/61724e612ab3f51d919c28e4.png">

需要注意的是，徽位小分一般都是約值，我歸算到了標準音位。

9.6 徽準確數值大概是9.46，輸出頻率比的時候如何歸到正確的比例，而非根據9.46這個大概値算出的比例？